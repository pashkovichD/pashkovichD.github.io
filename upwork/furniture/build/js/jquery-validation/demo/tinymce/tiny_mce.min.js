var tinymce={majorVersion:"3",minorVersion:"2.1.1",releaseDate:"2008-11-27",_init:function(){var e,t,n,i,o,s=this,r=document,a=window,c=navigator,l=c.userAgent;if(s.isOpera=a.opera&&opera.buildNumber,s.isWebKit=/WebKit/.test(l),s.isOldWebKit=s.isWebKit&&!a.getSelection().getRangeAt,s.isIE=!s.isWebKit&&!s.isOpera&&/MSIE/gi.test(l)&&/Explorer/gi.test(c.appName),s.isIE6=s.isIE&&/MSIE [56]/.test(l),s.isGecko=!s.isWebKit&&/Gecko/.test(l),s.isMac=-1!=l.indexOf("Mac"),s.isAir=/adobeair/i.test(l),a.tinyMCEPreInit)return s.suffix=tinyMCEPreInit.suffix,s.baseURL=tinyMCEPreInit.base,void(s.query=tinyMCEPreInit.query);for(s.suffix="",t=r.getElementsByTagName("base"),e=0;e<t.length;e++)(o=t[e].href)&&(/^https?:\/\/[^\/]+$/.test(o)&&(o+="/"),n=o?o.match(/.*\//)[0]:"");function d(e){return e.src&&/tiny_mce(|_dev|_src|_gzip|_jquery|_prototype).js/.test(e.src)&&(/_(src|dev)\.js/g.test(e.src)&&(s.suffix="_src"),-1!=(i=e.src.indexOf("?"))&&(s.query=e.src.substring(i+1)),s.baseURL=e.src.substring(0,e.src.lastIndexOf("/")),n&&-1==s.baseURL.indexOf("://")&&(s.baseURL=n+s.baseURL),s.baseURL)}for(t=r.getElementsByTagName("script"),e=0;e<t.length;e++)if(d(t[e]))return;if(r=r.getElementsByTagName("head")[0])for(t=r.getElementsByTagName("script"),e=0;e<t.length;e++)if(d(t[e]))return},is:function(e,t){var n=typeof e;return t?"array"==t&&e instanceof Array||n==t:"undefined"!=n},each:function(e,t,n){var i,o;if(!e)return 0;if(n=n||e,void 0!==e.length){for(i=0,o=e.length;i<o;i++)if(!1===t.call(n,e[i],i,e))return 0}else for(i in e)if(e.hasOwnProperty(i)&&!1===t.call(n,e[i],i,e))return 0;return 1},map:function(e,t){var n=[];return tinymce.each(e,function(e){n.push(t(e))}),n},grep:function(e,t){var n=[];return tinymce.each(e,function(e){t&&!t(e)||n.push(e)}),n},inArray:function(e,t){var n,i;if(e)for(n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},extend:function(n,e){for(var t=arguments,i=1;i<t.length;i++)e=t[i],tinymce.each(e,function(e,t){void 0!==e&&(n[t]=e)});return n},trim:function(e){return(e?""+e:"").replace(/^\s*|\s*$/g,"")},create:function(e,t){var n,i,o,s,r,a=this,c=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],!(i=a.createNS(e[3].replace(/\.\w+$/,"")))[o]){if("static"==e[2])return i[o]=t,void(this.onCreate&&this.onCreate(e[2],e[3],i[o]));t[o]||(t[o]=function(){},c=1),i[o]=t[o],a.extend(i[o].prototype,t),e[5]&&(n=a.resolve(e[5]).prototype,s=e[5].match(/\.(\w+)$/i)[1],r=i[o],i[o]=c?function(){return n[s].apply(this,arguments)}:function(){return this.parent=n[s],r.apply(this,arguments)},i[o].prototype[o]=i[o],a.each(n,function(e,t){i[o].prototype[t]=n[t]}),a.each(t,function(e,t){n[t]?i[o].prototype[t]=function(){return this.parent=n[t],e.apply(this,arguments)}:t!=o&&(i[o].prototype[t]=e)})),a.each(t.static,function(e,t){i[o][t]=e}),this.onCreate&&this.onCreate(e[2],e[3],i[o].prototype)}},walk:function(e,n,i,o){o=o||this,e&&(i&&(e=e[i]),tinymce.each(e,function(e,t){return!1!==n.call(o,e,t,i)&&void tinymce.walk(e,n,i,o)}))},createNS:function(e,t){var n,i;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)t[i=e[n]]||(t[i]={}),t=t[i];return t},resolve:function(e,t){var n,i;for(t=t||window,n=0,i=(e=e.split(".")).length;n<i&&(t=t[e[n]]);n++);return t},addUnload:function(e,t){var i=this,o=window;function s(){var e,t,n=i.unloads;if(n){for(t in n)(e=n[t])&&e.func&&e.func.call(e.scope,1);o.detachEvent?(o.detachEvent("onbeforeunload",r),o.detachEvent("onunload",s)):o.removeEventListener&&o.removeEventListener("unload",s,!1),i.unloads=e=n=o=s=null,window.CollectGarbage&&window.CollectGarbage()}}function r(){var e=document;function t(){e.detachEvent("onstop",t),s(),e=null}"interactive"==e.readyState&&(e.attachEvent("onstop",t),window.setTimeout(function(){e.detachEvent("onstop",t)},0))}return e={func:e,scope:t||this},i.unloads?i.unloads.push(e):(o.attachEvent?(o.attachEvent("onunload",s),o.attachEvent("onbeforeunload",r)):o.addEventListener&&o.addEventListener("unload",s,!1),i.unloads=[e]),e},removeUnload:function(n){var i=this.unloads,o=null;return tinymce.each(i,function(e,t){if(e&&e.func==n)return i.splice(t,1),o=n,!1}),o},explode:function(e,t){return e&&tinymce.map(e.split(t||","),tinymce.trim)},_addVer:function(e){var t;return this.query?(t=(-1==e.indexOf("?")?"?":"&")+this.query,-1==e.indexOf("#")?e+t:e.replace("#",t+"#")):e}};window.tinymce=tinymce,tinymce._init(),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(e){this.scope=e||this,this.listeners=[]},add:function(e,t){return this.listeners.push({cb:e,scope:t||this.scope}),e},addToTop:function(e,t){return this.listeners.unshift({cb:e,scope:t||this.scope}),e},remove:function(n){var i=this.listeners,o=null;return tinymce.each(i,function(e,t){if(n==e.cb)return o=n,i.splice(t,1),!1}),o},dispatch:function(){for(var e,t,n=arguments,i=this.listeners,o=0;o<i.length&&!1!==(e=(t=i[o]).cb.apply(t.scope,n));o++);return e}}),function(){var s=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(n,e){var i=this;e=i.settings=e||{},/^(mailto|news|javascript|about):/i.test(n)||/^\s*#/.test(n)?i.source=n:(n=(n=-1===(n=0===n.indexOf("/")&&0!==n.indexOf("//")?(e.base_uri&&e.base_uri.protocol||"http")+"://mce_host"+n:n).indexOf(":/")&&0!==n.indexOf("//")?(e.base_uri.protocol||"http")+"://mce_host"+i.toAbsPath(e.base_uri.path,n):n).replace(/@@/g,"(mce_at)"),n=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n),s(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(e,t){t=(t=n[t])&&t.replace(/\(mce_at\)/g,"@@");i[e]=t}),(e=e.base_uri)&&(i.protocol||(i.protocol=e.protocol),i.userInfo||(i.userInfo=e.userInfo),i.port||"mce_host"!=i.host||(i.port=e.port),i.host&&"mce_host"!=i.host||(i.host=e.host),i.source=""))},setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t=this;return"./"===e?e:"mce_host"!=(e=new tinymce.util.URI(e,{base_uri:t})).host&&t.host!=e.host&&e.host||t.port!=e.port||t.protocol!=e.protocol?e.getURI():(t=t.toRelPath(t.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return(e=new tinymce.util.URI(e,{base_uri:this})).getURI(this.host==e.host?t:0)},toRelPath:function(e,t){var n,i,o,s=0,r="";if(e=(e=e.substring(0,e.lastIndexOf("/"))).split("/"),n=t.split("/"),e.length>=n.length)for(i=0,o=e.length;i<o;i++)if(i>=n.length||e[i]!=n[i]){s=i+1;break}if(e.length<n.length)for(i=0,o=n.length;i<o;i++)if(i>=e.length||e[i]!=n[i]){s=i+1;break}if(1==s)return t;for(i=0,o=e.length-(s-1);i<o;i++)r+="../";for(i=s-1,o=n.length;i<o;i++)r+=i!=s-1?"/"+n[i]:n[i];return r},toAbsPath:function(e,t){var n,i=0,o=[];for(e=e.split("/"),t=t.split("/"),s(e,function(e){e&&o.push(e)}),e=o,n=t.length-1,o=[];0<=n;n--)0!=t[n].length&&"."!=t[n]&&(".."!=t[n]?0<i?i--:o.push(t[n]):i++);return(n=e.length-i)<=0?"/"+o.reverse().join("/"):"/"+e.slice(0,n).join("/")+"/"+o.reverse().join("/")},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(n.protocol&&(t+=n.protocol+"://"),n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}})}(),function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(e){var t,e=this.get(e);return e&&a(e.split("&"),function(e){e=e.split("="),(t=t||{})[unescape(e[0])]=unescape(e[1])}),t},setHash:function(e,t,n,i,o,s){var r="";a(t,function(e,t){r+=(r?"&":"")+escape(t)+"="+escape(e)}),this.set(e,r,n,i,o,s)},get:function(e){var t,n=document.cookie,i=e+"=";if(n){if(-1==(t=n.indexOf("; "+i))){if(0!=(t=n.indexOf(i)))return null}else t+=2;return-1==(e=n.indexOf(";",t))&&(e=n.length),unescape(n.substring(t+i.length,e))}},set:function(e,t,n,i,o,s){document.cookie=e+"="+escape(t)+(n?"; expires="+n.toGMTString():"")+(i?"; path="+escape(i):"")+(o?"; domain="+o:"")+(s?"; secure":"")},remove:function(e,t){var n=new Date;n.setTime(n.getTime()-1e3),this.set(e,"",n,t,n)}})}(),tinymce.create("static tinymce.util.JSON",{serialize:function(e){var n,i,t,o=tinymce.util.JSON.serialize;if(null==e)return"null";if("string"==(t=typeof e))return i="\bb\tt\nn\ff\rr\"\"''\\\\",'"'+e.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(e,t){return(n=i.indexOf(t))+1?"\\"+i.charAt(n+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+'"';if("object"!=t)return""+e;if(e instanceof Array){for(n=0,i="[";n<e.length;n++)i+=(0<n?",":"")+o(e[n]);return i+"]"}for(n in i="{",e)i+="function"!=typeof e[n]?(1<i.length?',"':'"')+n+'":'+o(e[n]):"";return i+"}"},parse:function(s){try{return eval("("+s+")")}catch(ex){}}}),tinymce.create("static tinymce.util.XHR",{send:function(e){var t,n=window,i=0;function o(e){t=0;try{t=new ActiveXObject(e)}catch(e){}return t}if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",t=n.XMLHttpRequest?new XMLHttpRequest:o("Microsoft.XMLHTTP")||o("Msxml2.XMLHTTP")){function s(){!e.async||4==t.readyState||1e4<i++?(e.success&&i<1e4&&200==t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,1e4<i?"TIMED_OUT":"GENERAL",t,e),t=null):n.setTimeout(s,10)}if(t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),t.send(e.data),!e.async)return s();n.setTimeout(s,10)}}}),function(){var t=tinymce.extend,s=tinymce.util.JSON,e=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(e){this.settings=t({},e),this.count=0},send:function(n){var i=n.error,o=n.success;(n=t(this.settings,n)).success=function(e,t){(e=void 0===(e=s.parse(e))?{error:"JSON Parse error."}:e).error?i.call(n.error_scope||n.scope,e.error,t):o.call(n.success_scope||n.scope,e.result)},n.error=function(e,t){i.call(n.error_scope||n.scope,e,t)},n.data=s.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",e.send(n)},static:{sendRPC:function(e){return(new tinymce.util.JSONRequest).send(e)}}})}(),function(){var each=tinymce.each,is=tinymce.is,isWebKit=tinymce.isWebKit,isIE=tinymce.isIE;tinymce.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,listeners:{},pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,cache:{},idPattern:/^#[\w]+$/,elmPattern:/^[\w_*]+$/,elmClassPattern:/^([\w_]*)\.([\w_]+)$/,props:{for:"htmlFor",class:"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(e,t){var n=this;if(n.doc=e,n.win=window,n.files={},n.cssFlicker=!1,n.counter=0,n.boxModel=!tinymce.isIE||"CSS1Compat"==e.compatMode,n.stdMode=8===e.documentMode,this.settings=t=tinymce.extend({keep_values:!1,hex_colors:1,process_html:1},t),tinymce.isIE6)try{e.execCommand("BackgroundImageCache",!1,!0)}catch(e){n.cssFlicker=!0}tinymce.addUnload(n.destroy,n)},getRoot:function(){var e=this.settings;return e&&this.get(e.root_element)||this.doc.body},getViewPort:function(e){var t=(e=e||this.win).document,t=this.boxModel?t.documentElement:t.body;return{x:e.pageXOffset||t.scrollLeft,y:e.pageYOffset||t.scrollTop,w:e.innerWidth||t.clientWidth,h:e.innerHeight||t.clientHeight}},getRect:function(e){var t;return e=this.get(e),t=this.getPos(e),e=this.getSize(e),{x:t.x,y:t.y,w:e.w,h:e.h}},getSize:function(e){var t,n;return e=this.get(e),t=this.getStyle(e,"width"),n=this.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t)||e.offsetWidth||e.clientWidth,h:parseInt(n)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){var i,o=this.settings;for(e=this.get(e),o.strict_root&&(n=n||this.getRoot()),is(t,"string")&&(i=t.toUpperCase(),t=function(t){var n=!1;return 1==t.nodeType&&"*"===i?!(n=!0):(each(i.split(","),function(e){if(1==t.nodeType&&(o.strict&&t.nodeName.toUpperCase()==e||t.nodeName.toUpperCase()==e))return!(n=!0)}),n)});e;){if(e==n)return null;if(t(e))return e;e=e.parentNode}return null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,(e=this.doc.getElementById(e))&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},select:function(pa,s){var t=this,cs,c,pl,o=[],x,i,l,n,xp;if(s=t.get(s)||t.doc,s.querySelectorAll)return s!=t.doc&&(i=s.id,s.id="_mc_tmp",pa="#_mc_tmp "+pa),l=tinymce.grep(s.querySelectorAll(pa)),s.id=i,l;if(t.selectorRe||(t.selectorRe=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@([\w\\]+)([\^\$\*!]?=)([\w\\]+)\])?(?:\:([\w\\]+))?/i),tinymce.isAir)return each(tinymce.explode(pa),function(e){for((xp=t.cache[e])||(xp="",each(e.split(" "),function(e){e=t.selectorRe.exec(e),xp+=e[1]?"//"+e[1]:"//*",e[2]&&(xp+="[@id='"+e[2]+"']"),e[3]&&each(e[3].split("."),function(e){xp+="[@class = '"+e+"' or contains(concat(' ', @class, ' '), ' "+e+" ')]"})}),t.cache[e]=xp),xp=t.doc.evaluate(xp,s,null,4,null);n=xp.iterateNext();)o.push(n)}),o;{function get(e,t){return e.getElementsByTagName(t.toLowerCase())}function get(e,t){return e.getElementsByTagName(t)}t.settings.strict}if(t.elmPattern.test(pa)){for(x=get(s,pa),i=0,l=x.length;i<l;i++)o.push(x[i]);return o}if(t.elmClassPattern.test(pa)){for(pl=t.elmClassPattern.exec(pa),x=get(s,pl[1]||"*"),c=" "+pl[2]+" ",i=0,l=x.length;i<l;i++)n=x[i],n.className&&-1!==(" "+n.className+" ").indexOf(c)&&o.push(n);return o}function collect(e){e.mce_save||(e.mce_save=1,o.push(e))}function collectIE(e){e.getAttribute("mce_save")||(e.setAttribute("mce_save","1"),o.push(e))}function find(e,t,n){for(var i=get(n,e),o=0,s=i.length;o<s;o++)t(i[o])}return each(pa.split(","),function(v,i){if(v=tinymce.trim(v),t.elmPattern.test(v))each(get(s,v),function(e){collect(e)});else{if(t.elmClassPattern.test(v))return x=t.elmClassPattern.exec(v),void each(get(s,x[1]),function(e){t.hasClass(e,x[2])&&collect(e)});if(!(cs=t.cache[pa])){for(cs="x=(function(cf, s) {",pl=v.split(" "),each(pl,function(e){e=t.selectorRe.exec(e);e[1]=e[1]||"*",cs+='find("'+e[1]+'", function(n) {',e[2]&&(cs+='if (n.id !== "'+e[2]+'") return;'),e[3]&&(cs+='var c = " " + n.className + " ";',cs+="if (",c="",each(e[3].split("."),function(e){e&&(c+=(c?"||":"")+'c.indexOf(" '+e+' ") === -1')}),cs+=c+") return;")}),cs+="cf(n);",i=pl.length-1;0<=i;i--)cs+="}, "+(i?"n":"s")+");";cs+="})",t.cache[pa]=cs=eval(cs)}cs(isIE?collectIE:collect,s)}}),each(o,function(e){isIE?e.removeAttribute("mce_save"):delete e.mce_save}),o},add:function(e,n,i,o,s){var r=this;return this.run(e,function(e){var t=is(n,"string")?r.doc.createElement(n):n;return r.setAttribs(t,i),o&&(o.nodeType?t.appendChild(o):r.setHTML(t,o)),s?t:e.appendChild(t)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var i,o="";for(i in o+="<"+e,t)t.hasOwnProperty(i)&&(o+=" "+i+'="'+this.encode(t[i])+'"');return tinymce.is(n)?o+">"+n+"</"+e+">":o+" />"},remove:function(e,i){return this.run(e,function(t){var n=t.parentNode;return n?(i&&each(t.childNodes,function(e){n.insertBefore(e.cloneNode(!0),t)}),n.removeChild(t)):null})},setStyle:function(n,i,o){var s=this;return s.run(n,function(e){var t=e.style;switch(i=i.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),s.pixelStyles.test(i)&&(tinymce.is(o,"number")||/^[\-0-9\.]+$/.test(o))&&(o+="px"),i){case"opacity":isIE&&(t.filter=""===o?"":"alpha(opacity="+100*o+")",n.currentStyle&&n.currentStyle.hasLayout||(t.display="inline-block")),t[i]=t["-moz-opacity"]=t["-khtml-opacity"]=o||"";break;case"float":isIE?t.styleFloat=o:t.cssFloat=o;break;default:t[i]=o||""}s.settings.update_styles&&s.setAttrib(e,"mce_style")})},getStyle:function(e,t,n){if(!(e=this.get(e)))return!1;if(this.doc.defaultView&&n){t=t.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(t)}catch(e){return null}}return"float"==(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}))&&(t=isIE?"styleFloat":"cssFloat"),(e.currentStyle&&n?e.currentStyle:e.style)[t]},setStyles:function(n,e){var i=this,t=i.settings,o=t.update_styles;t.update_styles=0,each(e,function(e,t){i.setStyle(n,t,e)}),t.update_styles=o,t.update_styles&&i.setAttrib(n,t.cssText)},setAttrib:function(e,t,i){var o=this;if(e&&t)return o.settings.strict&&(t=t.toLowerCase()),this.run(e,function(n){var e=o.settings;switch(t){case"style":if(!is(i,"string"))return void each(i,function(e,t){o.setStyle(n,t,e)});e.keep_values&&(i&&!o._isRes(i)?n.setAttribute("mce_style",i,2):n.removeAttribute("mce_style",2)),n.style.cssText=i;break;case"class":n.className=i||"";break;case"src":case"href":e.keep_values&&(e.url_converter&&(i=e.url_converter.call(e.url_converter_scope||o,i,t,n)),o.setAttrib(n,"mce_"+t,i,2));break;case"shape":n.setAttribute("mce_style",i)}is(i)&&null!==i&&0!==i.length?n.setAttribute(t,""+i,2):n.removeAttribute(t,2)})},setAttribs:function(e,t){var i=this;return this.run(e,function(n){each(t,function(e,t){i.setAttrib(n,t,e)})})},getAttrib:function(e,t,n){var i,o=this;if(!(e=o.get(e))||1!==e.nodeType)return!1;if(is(n)||(n=""),/^(src|href|style|coords|shape)$/.test(t)&&(i=e.getAttribute("mce_"+t)))return i;if(i=(i=isIE&&o.props[t]?(i=e[o.props[t]])&&i.nodeValue?i.nodeValue:i:i)||e.getAttribute(t,2),"style"===t&&(i=i||e.style.cssText)&&(i=o.serializeStyle(o.parseStyle(i)),o.settings.keep_values&&!o._isRes(i)&&e.setAttribute("mce_style",i)),isWebKit&&"class"===t&&i&&(i=i.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),isIE)switch(t){case"rowspan":case"colspan":1===i&&(i="");break;case"size":"+0"!==i&&20!==i||(i="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===i&&(i="");break;case"hspace":-1===i&&(i="");break;case"maxlength":case"tabindex":32768!==i&&2147483647!==i&&"32768"!==i||(i="");break;case"compact":case"noshade":case"nowrap":return 65535===i?t:n;case"shape":i=i.toLowerCase();break;default:0===t.indexOf("on")&&i&&(i=(""+i).replace(/^function\s+anonymous\(\)\s+\{\s+(.*)\s+\}$/,"$1"))}return null!=i&&""!==i?""+i:n},getPos:function(e){var t,n,i=this,o=0,s=0,r=i.doc;if((e=i.get(e))&&isIE)return e=e.getBoundingClientRect(),t=i.boxModel?r.documentElement:r.body,o="medium"==(o=i.getStyle(i.select("html")[0],"borderWidth"))||i.boxModel&&!i.isIE6?2:o,e.top+=i.win.self!=i.win.top?2:0,{x:e.left+t.scrollLeft-o,y:e.top+t.scrollTop-o};for(n=e;n;)o+=n.offsetLeft||0,s+=n.offsetTop||0,n=n.offsetParent;for(n=e;n&&(/^table-row|inline.*/i.test(i.getStyle(n,"display",1))||(o-=n.scrollLeft||0,s-=n.scrollTop||0),(n=n.parentNode)!=r.body););return{x:o,y:s}},parseStyle:function(e){var t,n,i,o,s=this,r=s.settings,a={};return e&&(e=e.replace(/&(#?[a-z0-9]+);/g,"&$1_MCE_SEMI_"),each(e.split(";"),function(e){var t,n=[];e&&(e=(e=(e=e.replace(/_MCE_SEMI_/g,";")).replace(/url\([^\)]+\)/g,function(e){return n.push(e),"url("+n.length+")"})).split(":"),t=(t=(t=tinymce.trim(e[1])).replace(/url\(([^\)]+)\)/g,function(e,t){return n[parseInt(t)-1]})).replace(/rgb\([^\)]+\)/g,function(e){return s.toHex(e)}),r.url_converter&&(t=t.replace(/url\([\'\"]?([^\)\'\"]+)[\'\"]?\)/g,function(e,t){return"url("+r.url_converter.call(r.url_converter_scope||s,s.decode(t),"style",null)+")"})),a[tinymce.trim(e[0]).toLowerCase()]=t)}),c("border","","border"),c("border","-width","border-width"),c("border","-color","border-color"),c("border","-style","border-style"),c("padding","","padding"),c("margin","","margin"),t="border",i="border-style",o="border-color",a[n="border-width"]&&(a[i]&&a[o])&&(a[t]=a[n]+" "+a[i]+" "+a[o],delete a[n],delete a[i],delete a[o]),isIE&&"medium none"==a.border&&(a.border="")),a;function c(e,t,n){var i,o,s,r=a[e+"-top"+t];r&&r==(i=a[e+"-right"+t])&&i==(o=a[e+"-bottom"+t])&&o==(s=a[e+"-left"+t])&&(a[n]=s,delete a[e+"-top"+t],delete a[e+"-right"+t],delete a[e+"-bottom"+t],delete a[e+"-left"+t])}},serializeStyle:function(e){var n="";return each(e,function(e,t){if(t&&e&&(!tinymce.isGecko||0!==t.indexOf("-moz-"))){switch(t){case"color":case"background-color":e=e.toLowerCase()}n+=(n?" ":"")+t+": "+e+";"}}),n},loadCSS:function(e){var t=this;t.doc;each((e=e||"").split(","),function(e){t.files[e]||(t.files[e]=!0,t.add(t.select("head")[0],"link",{rel:"stylesheet",href:tinymce._addVer(e)}))})},addClass:function(e,n){return this.run(e,function(e){var t;return n?this.hasClass(e,n)?e.className:(t=this.removeClass(e,n),e.className=(""!=t?t+" ":"")+n):0})},removeClass:function(e,n){var i,o=this;return o.run(e,function(e){var t;return o.hasClass(e,n)?(i=i||new RegExp("(^|\\s+)"+n+"(\\s+|$)","g"),t=e.className.replace(i," "),e.className=tinymce.trim(" "!=t?t:"")):e.className})},hasClass:function(e,t){return!(!(e=this.get(e))||!t)&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return!(e=this.get(e))||"none"==e.style.display||"none"==this.getStyle(e,"display")},uniqueId:function(e){return(e||"mce_")+this.counter++},setHTML:function(e,a){var c=this;return this.run(e,function(n){var e,t,i,o,s;if(a=c.processHTML(a),isIE){function r(){try{n.innerHTML="<br />"+a,n.removeChild(n.firstChild)}catch(e){for(;n.firstChild;)n.firstChild.removeNode();(s=c.create("div")).innerHTML="<br />"+a,each(s.childNodes,function(e,t){t&&n.appendChild(e)})}}if(c.settings.fix_ie_paragraphs&&(a=a.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,'<p$1 mce_keep="true">&nbsp;</p>')),r(),c.settings.fix_ie_paragraphs)for(e=(t=n.getElementsByTagName("p")).length-1,s=0;0<=e;e--)if(!(i=t[e]).hasChildNodes()){if(!i.mce_keep){s=1;break}i.removeAttribute("mce_keep")}if(s&&(a=(a=a.replace(/<p ([^>]+)>|<p>/g,'<div $1 mce_tmp="1">')).replace(/<\/p>/g,"</div>"),r(),c.settings.fix_ie_paragraphs))for(e=(t=n.getElementsByTagName("DIV")).length-1;0<=e;e--)if((i=t[e]).mce_tmp){for(o=c.doc.createElement("p"),i.cloneNode(!1).outerHTML.replace(/([a-z0-9\-_]+)=/gi,function(e,t){var n;"mce_tmp"!==t&&((n=i.getAttribute(t))||"class"!==t||(n=i.className),o.setAttribute(t,n))}),s=0;s<i.childNodes.length;s++)o.appendChild(i.childNodes[s].cloneNode(!0));i.swapNode(o)}}else n.innerHTML=a;return a})},processHTML:function(e){var r=this,a=r.settings;return a.process_html?(tinymce.isGecko?e=(e=e.replace(/<(\/?)strong>|<strong( [^>]+)>/gi,"<$1b$2>")).replace(/<(\/?)em>|<em( [^>]+)>/gi,"<$1i$2>"):isIE&&(e=(e=e.replace(/&apos;/g,"&#39;")).replace(/\s+(disabled|checked|readonly|selected)\s*=\s*[\"\']?(false|0)[\"\']?/gi,"")),e=e.replace(/<a( )([^>]+)\/>|<a\/>/gi,"<a$1$2></a>"),e=a.keep_values?(e=(e=/<script|style/.test(e)?(e=e.replace(/<script([^>]+|)>([\s\S]*?)<\/script>/g,function(e,t,n){return"<mce:script"+(t=t||' type="text/javascript"')+">"+(n=(n=i(n))&&"\x3c!--\n"+n+"\n// --\x3e")+"</mce:script>"})).replace(/<style([^>]+|)>([\s\S]*?)<\/style>/g,function(e,t,n){return"<mce:style"+t+">\x3c!--\n"+(n=i(n))+"\n--\x3e</mce:style><style"+t+' mce_bogus="1">'+n+"</style>"}):e).replace(/<!\[CDATA\[([\s\S]+)\]\]>/g,"\x3c!--[CDATA[$1]]--\x3e")).replace(/<([\w:]+) [^>]*(src|href|style|shape|coords)[^>]*>/gi,function(o,s){function e(e,n,t){var i=t;if(-1!=o.indexOf("mce_"+n))return e;if("style"==n){if(r._isRes(t))return e;a.hex_colors&&(i=i.replace(/rgb\([^\)]+\)/g,function(e){return r.toHex(e)})),a.url_converter&&(i=i.replace(/url\([\'\"]?([^\)\'\"]+)\)/g,function(e,t){return"url("+r.encode(a.url_converter.call(a.url_converter_scope||r,r.decode(t),n,s))+")"}))}else"coords"!=n&&"shape"!=n&&a.url_converter&&(i=r.encode(a.url_converter.call(a.url_converter_scope||r,r.decode(t),n,s)));return" "+n+'="'+t+'" mce_'+n+'="'+i+'"'}return(o=(o=o.replace(/ (src|href|style|coords|shape)=[\"]([^\"]+)[\"]/gi,e)).replace(/ (src|href|style|coords|shape)=[\']([^\']+)[\']/gi,e)).replace(/ (src|href|style|coords|shape)=([^\s\"\'>]+)/gi,e)}):e):e;function i(e){return e=(e=(e=(e=e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n")).replace(/^[\r\n]*|[\r\n]*$/g,"")).replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"")).replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"")}},getOuterHTML:function(e){var t;return(e=this.get(e))?isIE?e.outerHTML:((t=(e.ownerDocument||this.doc).createElement("body")).appendChild(e.cloneNode(!0)),t.innerHTML):null},setOuterHTML:function(e,i,o){var s=this;return this.run(e,function(e){var t,n;if(e=s.get(e),o=o||e.ownerDocument||s.doc,isIE&&1==e.nodeType)e.outerHTML=i;else{for((n=o.createElement("body")).innerHTML=i,t=n.lastChild;t;)s.insertAfter(t.cloneNode(!0),e),t=t.previousSibling;s.remove(e)}})},decode:function(e){var t,n,i;if(/&[^;]+;/.test(e)){if((t=this.doc.createElement("div")).innerHTML=e,i="",n=t.firstChild)for(;i+=n.nodeValue,n.nextSibling;);return i||e}return e},encode:function(e){return e&&(""+e).replace(/[<>&\"]/g,function(e,t){switch(e){case"&":return"&amp;";case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;"}return e})},insertAfter:function(e,i){return i=this.get(i),this.run(e,function(e){var t=i.parentNode,n=i.nextSibling;return n?t.insertBefore(e,n):t.appendChild(e),e})},isBlock:function(e){return(!e.nodeType||1===e.nodeType)&&(e=e.nodeName||e,/^(H[1-6]|HR|P|DIV|ADDRESS|PRE|FORM|TABLE|LI|OL|UL|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP)$/.test(e))},replace:function(t,e,n){return is(e,"array")&&(t=t.cloneNode(!0)),this.run(e,function(e){return n&&each(e.childNodes,function(e){t.appendChild(e.cloneNode(!0))}),e.parentNode.replaceChild(t,e)})},toHex:function(e){var t=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(e);function n(e){return 1<(e=parseInt(e).toString(16)).length?e:"0"+e}return t?e="#"+n(t[1])+n(t[2])+n(t[3]):e},getClasses:function(){var n,e=this,i=[],o={},s=e.settings.class_filter;if(e.classes)return e.classes;try{each(e.doc.styleSheets,function t(e){each(e.imports,function(e){t(e)}),each(e.cssRules||e.rules,function(e){switch(e.type||1){case 1:e.selectorText&&each(e.selectorText.split(","),function(e){e=e.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(e)&&/\.[\w\-]+$/.test(e)&&(e=(n=e).replace(/.*\.([a-z0-9_\-]+).*/i,"$1"),s&&!(e=s(e,n))||o[e]||(i.push({class:e}),o[e]=1))});break;case 3:t(e.styleSheet)}})})}catch(e){}return 0<i.length&&(e.classes=i),i},run:function(e,n,i){var o,s=this;return!!(e=s.doc&&"string"==typeof e?s.get(e):e)&&(i=i||this,e.nodeType||!e.length&&0!==e.length?n.call(i,e):(o=[],each(e,function(e,t){e&&("string"==typeof e&&(e=s.doc.getElementById(e)),o.push(n.call(i,e,t)))}),o))},getAttribs:function(e){var n;return(e=this.get(e))?isIE?(n=[],"OBJECT"==e.nodeName?e.attributes:(e.cloneNode(!1).outerHTML.replace(/([a-z0-9\:\-_]+)=/gi,function(e,t){n.push({specified:1,nodeName:t})}),n)):e.attributes:[]},destroy:function(e){this.win=this.doc=this.root=null,e||tinymce.removeUnload(this.destroy)},_isRes:function(e){return/^(top|left|bottom|right|width|height)/i.test(e)||/;\s*(top|left|bottom|right|width|height)/i.test(e)}}),tinymce.DOM=new tinymce.dom.DOMUtils(document,{process_html:0})}(),function(){var t,c=tinymce.each,l=tinymce.DOM,d=tinymce.isIE,n=tinymce.isWebKit;tinymce.create("static tinymce.dom.Event",{inits:[],events:[],add:function(e,t,n,i){var o,s,r=this,a=r.events;return e&&e instanceof Array?(s=[],c(e,function(e){e=l.get(e),s.push(r.add(e,t,n,i))}),s):(e=l.get(e))?(o=function(e){return(e=e||window.event)&&!e.target&&d&&(e.target=e.srcElement),i?n.call(i,e):n(e)},"unload"==t?(tinymce.unloads.unshift({func:o}),o):"init"==t?(r.domLoaded?o():r.inits.push(o),o):(a.push({obj:e,name:t,func:n,cfunc:o,scope:i}),r._add(e,t,o),n)):void 0},remove:function(n,i,o){var t,s=this,r=s.events,a=!1;return n&&n instanceof Array?(t=[],c(n,function(e){e=l.get(e),t.push(s.remove(e,i,o))}),t):(n=l.get(n),c(r,function(e,t){if(e.obj==n&&e.name==i&&(!o||e.func==o||e.cfunc==o))return r.splice(t,1),s._remove(n,i,e.cfunc),!(a=!0)}),a)},clear:function(e){var t,n,i=this.events;if(e)for(e=l.get(e),t=i.length-1;0<=t;t--)(n=i[t]).obj===e&&(this._remove(n.obj,n.name,n.cfunc),n.obj=n.cfunc=null,i.splice(t,1))},cancel:function(e){return!!e&&(this.stop(e),this.prevent(e))},stop:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1},prevent:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},_unload:function(){var n=t;c(n.events,function(e,t){n._remove(e.obj,e.name,e.cfunc),e.obj=e.cfunc=null}),n.events=[],n=null},_add:function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener?e.addEventListener(t,n,!1):e["on"+t]=n},_remove:function(e,t,n){if(e)try{e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener?e.removeEventListener(t,n,!1):e["on"+t]=null}catch(e){}},_pageInit:function(){var e=t;e.domLoaded||(e._remove(window,"DOMContentLoaded",e._pageInit),e.domLoaded=!0,c(e.inits,function(e){e()}),e.inits=[])},_wait:function(){var e;window.tinyMCE_GZ&&tinyMCE_GZ.loaded?t.domLoaded=1:d&&"https:"!=document.location.protocol?(document.write("<script id=__ie_onload defer src='javascript:\"\"';><\/script>"),l.get("__ie_onload").onreadystatechange=function(){"complete"==this.readyState&&(t._pageInit(),l.get("__ie_onload").onreadystatechange=null)}):(t._add(window,"DOMContentLoaded",t._pageInit,t),(d||n)&&(e=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(e),t._pageInit())},10)))}}),(t=tinymce.dom.Event)._wait(),tinymce.addUnload(t._unload)}(),function(){var a=tinymce.each;tinymce.create("tinymce.dom.Element",{Element:function(i,e){var o,s,r=this;e=e||{},r.id=i,r.dom=o=e.dom||tinymce.DOM,r.settings=e,tinymce.isIE||(s=r.dom.get(r.id)),a(["getPos","getRect","getParent","add","setStyle","getStyle","setStyles","setAttrib","setAttribs","getAttrib","addClass","removeClass","hasClass","getOuterHTML","setOuterHTML","remove","show","hide","isHidden","setHTML","get"],function(n){r[n]=function(){var e,t=arguments;return tinymce.isOpera?(t=[i],a(arguments,function(e){t.push(e)})):Array.prototype.unshift.call(t,s||i),e=o[n].apply(o,t),r.update(n),e}})},on:function(e,t,n){return tinymce.dom.Event.add(this.id,e,t,n)},getXY:function(){return{x:parseInt(this.getStyle("left")),y:parseInt(this.getStyle("top"))}},getSize:function(){var e=this.dom.get(this.id);return{w:parseInt(this.getStyle("width")||e.clientWidth),h:parseInt(this.getStyle("height")||e.clientHeight)}},moveTo:function(e,t){this.setStyles({left:e,top:t})},moveBy:function(e,t){var n=this.getXY();this.moveTo(n.x+e,n.y+t)},resizeTo:function(e,t){this.setStyles({width:e,height:t})},resizeBy:function(e,t){var n=this.getSize();this.resizeTo(n.w+e,n.h+t)},update:function(e){var t,n=this,i=n.dom;tinymce.isIE6&&n.settings.blocker&&0!==(e=e||"").indexOf("get")&&0!==e.indexOf("has")&&0!==e.indexOf("is")&&("remove"!=e?(n.blocker?t=i.get(n.blocker):(n.blocker=i.uniqueId(),t=i.add(n.settings.container||i.getRoot(),"iframe",{id:n.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),i.setStyle(t,"opacity",0)),i.setStyle(t,"left",n.getStyle("left",1)),i.setStyle(t,"top",n.getStyle("top",1)),i.setStyle(t,"width",n.getStyle("width",1)),i.setStyle(t,"height",n.getStyle("height",1)),i.setStyle(t,"display",n.getStyle("display",1)),i.setStyle(t,"zIndex",parseInt(n.getStyle("zIndex",1)||0)-1)):i.remove(n.blocker))}})}(),function(){function m(e){return e.replace(/[\n\r]+/g,"")}var a=tinymce.is,h=tinymce.isIE,f=tinymce.each;tinymce.create("tinymce.dom.Selection",{Selection:function(e,t,n){var i=this;i.dom=e,i.win=t,i.serializer=n,f(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(e){i[e]=new tinymce.util.Dispatcher(i)}),tinymce.addUnload(i.destroy,i)},getContent:function(e){var t,n,i=this,o=i.getRng(),s=i.dom.create("body"),r=i.getSel();return t=n="",(e=e||{}).get=!0,e.format=e.format||"html",i.onBeforeGetContent.dispatch(i,e),"text"==e.format?i.isCollapsed()?"":o.text||(r.toString?r.toString():""):(o.cloneContents?(r=o.cloneContents())&&s.appendChild(r):a(o.item)||a(o.htmlText)?s.innerHTML=o.item?o.item(0).outerHTML:o.htmlText:s.innerHTML=o.toString(),/^\s/.test(s.innerHTML)&&(t=" "),/\s+$/.test(s.innerHTML)&&(n=" "),e.getInner=!0,e.content=i.isCollapsed()?"":t+i.serializer.serialize(s,e)+n,i.onGetContent.dispatch(i,e),e.content)},setContent:function(e,t){var n,i=this,o=i.getRng(),s=i.win.document;(t=t||{format:"html"}).set=!0,e=t.content=i.dom.processHTML(e),i.onBeforeSetContent.dispatch(i,t),e=t.content,o.insertNode?(e+='<span id="__caret">_</span>',o.deleteContents(),o.insertNode(i.getRng().createContextualFragment(e)),n=i.dom.get("__caret"),(o=s.createRange()).setStartBefore(n),o.setEndAfter(n),i.setRng(o),s.execCommand("Delete",!1,null),i.dom.remove("__caret")):(o.item&&(s.execCommand("Delete",!1,null),o=i.getRng()),o.pasteHTML(e)),i.onSetContent.dispatch(i,t)},getStart:function(){var e,t=this.getRng();return h?t.item?t.item(0):((t=t.duplicate()).collapse(1),(e=t.parentElement())&&"BODY"==e.nodeName?e.firstChild:e):"BODY"==(e=t.startContainer).nodeName?e.firstChild:this.dom.getParent(e,function(e){return 1==e.nodeType})},getEnd:function(){var e,t=this.getRng();return h?t.item?t.item(0):((t=t.duplicate()).collapse(0),(e=t.parentElement())&&"BODY"==e.nodeName?e.lastChild:e):"BODY"==(e=t.endContainer).nodeName?e.lastChild:this.dom.getParent(e,function(e){return 1==e.nodeType})},getBookmark:function(e){var n,i,t,a=this,o=a.getRng(),s=a.dom.getViewPort(a.win),r=-16777215,c=a.dom.getRoot(),l=0,d=s.x,s=s.y;return"simple"==e?{rng:o,scrollX:d,scrollY:s}:h?o.item?(n=o.item(0),f(a.dom.select(n.nodeName),function(e,t){if(n==e)return i=t,!1}),{tag:n.nodeName,index:i,scrollX:d,scrollY:s}):((t=a.dom.doc.body.createTextRange()).moveToElementText(c),t.collapse(!0),e=Math.abs(t.move("character",r)),(t=o.duplicate()).collapse(!0),i=Math.abs(t.move("character",r)),(t=o.duplicate()).collapse(!1),t=Math.abs(t.move("character",r))-i,{start:i-e,length:t,scrollX:d,scrollY:s}):(n=a.getNode(),(t=a.getSel())?n&&"IMG"==n.nodeName?{scrollX:d,scrollY:s}:t.anchorNode==t.focusNode&&t.anchorOffset==t.focusOffset?(n=u(c,t.anchorNode,t.focusNode))?(m(t.anchorNode.nodeValue||"").replace(/^\s+/,function(e){l=e.length}),{start:Math.max(n.start+t.anchorOffset-l,0),end:Math.max(n.end+t.focusOffset-l,0),scrollX:d,scrollY:s,beg:t.anchorOffset-l==0}):{scrollX:d,scrollY:s}:(n=u(c,o.startContainer,o.endContainer))?{start:Math.max(n.start+o.startOffset-l,0),end:Math.max(+(n.end+o.endOffset),0),scrollX:d,scrollY:s,beg:o.startOffset-l==0}:{scrollX:d,scrollY:s}:null);function u(e,t,n){for(var i,o=a.dom.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),s=0,r={};null!=(i=o.nextNode());){if(i==t&&(r.start=s),i==n)return r.end=s,r;s+=m(i.nodeValue||"").length}return null}},moveToBookmark:function(c){var e,l,d,u=this,n=u.getRng(),t=u.getSel(),i=u.dom.getRoot();if(!c)return!1;if(u.win.scrollTo(c.scrollX,c.scrollY),h){if(n=c.rng){try{n.select()}catch(e){}return!0}if(u.win.focus(),c.tag)n=i.createControlRange(),f(u.dom.select(c.tag),function(e,t){t==c.index&&n.addElement(e)});else try{if(c.start<0)return!0;(n=t.createRange()).moveToElementText(i),n.collapse(!0),n.moveStart("character",c.start),n.moveEnd("character",c.length)}catch(e){return!0}try{n.select()}catch(e){}return!0}if(!t)return!1;if(c.rng)t.removeAllRanges(),t.addRange(c.rng);else if(a(c.start)&&a(c.end))try{(e=function(e,t,n){for(var i,o,s=u.dom.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),r=0,a={};null!=(i=s.nextNode());){if(0,d=i.nodeValue||"",t<=(r+=l=m(d).length)&&!a.startNode){if(o=t-(r-l),c.beg&&l<=o)continue;a.startNode=i,a.startOffset=0+o}if(n<=r)return a.endNode=i,a.endOffset=n-(r-l)+0,a}return null}(i,c.start,c.end))&&((n=u.dom.doc.createRange()).setStart(e.startNode,e.startOffset),n.setEnd(e.endNode,e.endOffset),t.removeAllRanges(),t.addRange(n)),tinymce.isOpera||u.win.focus()}catch(e){}},select:function(e,t){var n,i,o,s=this.getRng(),r=(this.getSel(),this.win.document);if(h)try{n=r.body,/^(IMG|TABLE)$/.test(e.nodeName)?(s=n.createControlRange()).addElement(e):(s=n.createTextRange()).moveToElementText(e),s.select()}catch(e){}else t?(i=(o=e)?r.createTreeWalker(o,NodeFilter.SHOW_TEXT,null,!1).nextNode():null,t=function(e){var t,n,i;if(!e)return null;for(i=r.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);t=i.nextNode();)n=t;return n}(e),i&&t?((s=r.createRange()).setStart(i,0),s.setEnd(t,t.nodeValue.length)):s.selectNode(e)):s.selectNode(e),this.setRng(s);return e},isCollapsed:function(){var e=this.getRng(),t=this.getSel();return!(!e||e.item)&&(!t||0==e.boundingWidth||e.collapsed)},collapse:function(e){var t,n=this.getRng();n.item&&(t=n.item(0),(n=this.win.document.body.createTextRange()).moveToElementText(t)),n.collapse(!!e),this.setRng(n)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(){var e,t=this.getSel();try{t&&(e=0<t.rangeCount?t.getRangeAt(0):(t.createRange?t:this.win.document).createRange())}catch(e){}return e=e||(h?this.win.document.body.createTextRange():this.win.document.createRange())},setRng:function(e){var t;if(h)try{e.select()}catch(e){}else(t=this.getSel())&&(t.removeAllRanges(),t.addRange(e))},setNode:function(e){return this.setContent(this.dom.getOuterHTML(e)),e},getNode:function(){var e,t=this.getRng(),n=this.getSel();if(h)return t.item?t.item(0):t.parentElement();if(!t)return this.dom.getRoot();if(e=t.commonAncestorContainer,!t.collapsed){if(tinymce.isWebKit&&n.anchorNode&&1==n.anchorNode.nodeType)return n.anchorNode.childNodes[n.anchorOffset];t.startContainer==t.endContainer&&t.startOffset-t.endOffset<2&&t.startContainer.hasChildNodes()&&(e=t.startContainer.childNodes[t.startOffset])}return this.dom.getParent(e,function(e){return 1==e.nodeType})},destroy:function(e){this.win=null,e||tinymce.removeUnload(this.destroy)}})}(),tinymce.create("tinymce.dom.XMLWriter",{node:null,XMLWriter:function(e){this.doc=function(){var e=document.implementation;if(e&&e.createDocument)return e.createDocument("","",null);try{return new ActiveXObject("MSXML2.DOMDocument")}catch(e){}try{return new ActiveXObject("Microsoft.XmlDom")}catch(e){}}(),this.valid=tinymce.isOpera||tinymce.isWebKit,this.reset()},reset:function(){var e=this.doc;e.firstChild&&e.removeChild(e.firstChild),this.node=e.appendChild(e.createElement("html"))},writeStartElement:function(e){this.node=this.node.appendChild(this.doc.createElement(e))},writeAttribute:function(e,t){this.valid&&(t=t.replace(/>/g,"%MCGT%")),this.node.setAttribute(e,t)},writeEndElement:function(){this.node=this.node.parentNode},writeFullEndElement:function(){var e=this.node;e.appendChild(this.doc.createTextNode("")),this.node=e.parentNode},writeText:function(e){this.valid&&(e=e.replace(/>/g,"%MCGT%")),this.node.appendChild(this.doc.createTextNode(e))},writeCDATA:function(e){this.node.appendChild(this.doc.createCDATA(e))},writeComment:function(e){tinymce.isIE&&(e=e.replace(/^\-|\-$/g," ")),this.node.appendChild(this.doc.createComment(e.replace(/\-\-/g," ")))},getContent:function(){var e=this.doc.xml||(new XMLSerializer).serializeToString(this.doc);return e=(e=e.replace(/<\?[^?]+\?>|<html>|<\/html>|<html\/>|<!DOCTYPE[^>]+>/g,"")).replace(/ ?\/>/g," />"),e=this.valid?e.replace(/\%MCGT%/g,"&gt;"):e}}),tinymce.create("tinymce.dom.StringWriter",{str:null,tags:null,count:0,settings:null,indent:null,StringWriter:function(e){this.settings=tinymce.extend({indent_char:" ",indentation:1},e),this.reset()},reset:function(){this.indent="",this.str="",this.tags=[],this.count=0},writeStartElement:function(e){this._writeAttributesEnd(),this.writeRaw("<"+e),this.tags.push(e),this.inAttr=!0,this.count++,this.elementCount=this.count},writeAttribute:function(e,t){this.writeRaw(" "+this.encode(e)+'="'+this.encode(t)+'"')},writeEndElement:function(){var e;0<this.tags.length&&(e=this.tags.pop(),this._writeAttributesEnd(1)&&this.writeRaw("</"+e+">"),0<this.settings.indentation&&this.writeRaw("\n"))},writeFullEndElement:function(){0<this.tags.length&&(this._writeAttributesEnd(),this.writeRaw("</"+this.tags.pop()+">"),0<this.settings.indentation&&this.writeRaw("\n"))},writeText:function(e){this._writeAttributesEnd(),this.writeRaw(this.encode(e)),this.count++},writeCDATA:function(e){this._writeAttributesEnd(),this.writeRaw("<![CDATA["+e+"]]>"),this.count++},writeComment:function(e){this._writeAttributesEnd(),this.writeRaw("\x3c!-- "+e+"--\x3e"),this.count++},writeRaw:function(e){this.str+=e},encode:function(e){return e.replace(/[<>&"]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;"}return e})},getContent:function(){return this.str},_writeAttributesEnd:function(e){if(this.inAttr)return this.inAttr=!1,e&&this.elementCount==this.count?(this.writeRaw(" />"),!1):(this.writeRaw(">"),!0)}}),function(){var t=tinymce.extend,m=tinymce.each,n=tinymce.util.Dispatcher,v=tinymce.isIE,_=tinymce.isGecko;function h(e){return e.replace(/([?+*])/g,".$1")}tinymce.create("tinymce.dom.Serializer",{Serializer:function(e){var d=this;if(d.key=0,d.onPreProcess=new n(d),d.onPostProcess=new n(d),tinymce.relaxedDomain&&tinymce.isGecko)d.writer=new tinymce.dom.StringWriter;else try{d.writer=new tinymce.dom.XMLWriter}catch(e){d.writer=new tinymce.dom.StringWriter}d.settings=e=t({dom:tinymce.DOM,valid_nodes:0,node_filter:0,attr_filter:0,invalid_attrs:/^(mce_|_moz_)/,closed:/(br|hr|input|meta|img|link|param)/,entity_encoding:"named",entities:"160,nbsp,161,iexcl,162,cent,163,pound,164,curren,165,yen,166,brvbar,167,sect,168,uml,169,copy,170,ordf,171,laquo,172,not,173,shy,174,reg,175,macr,176,deg,177,plusmn,178,sup2,179,sup3,180,acute,181,micro,182,para,183,middot,184,cedil,185,sup1,186,ordm,187,raquo,188,frac14,189,frac12,190,frac34,191,iquest,192,Agrave,193,Aacute,194,Acirc,195,Atilde,196,Auml,197,Aring,198,AElig,199,Ccedil,200,Egrave,201,Eacute,202,Ecirc,203,Euml,204,Igrave,205,Iacute,206,Icirc,207,Iuml,208,ETH,209,Ntilde,210,Ograve,211,Oacute,212,Ocirc,213,Otilde,214,Ouml,215,times,216,Oslash,217,Ugrave,218,Uacute,219,Ucirc,220,Uuml,221,Yacute,222,THORN,223,szlig,224,agrave,225,aacute,226,acirc,227,atilde,228,auml,229,aring,230,aelig,231,ccedil,232,egrave,233,eacute,234,ecirc,235,euml,236,igrave,237,iacute,238,icirc,239,iuml,240,eth,241,ntilde,242,ograve,243,oacute,244,ocirc,245,otilde,246,ouml,247,divide,248,oslash,249,ugrave,250,uacute,251,ucirc,252,uuml,253,yacute,254,thorn,255,yuml,402,fnof,913,Alpha,914,Beta,915,Gamma,916,Delta,917,Epsilon,918,Zeta,919,Eta,920,Theta,921,Iota,922,Kappa,923,Lambda,924,Mu,925,Nu,926,Xi,927,Omicron,928,Pi,929,Rho,931,Sigma,932,Tau,933,Upsilon,934,Phi,935,Chi,936,Psi,937,Omega,945,alpha,946,beta,947,gamma,948,delta,949,epsilon,950,zeta,951,eta,952,theta,953,iota,954,kappa,955,lambda,956,mu,957,nu,958,xi,959,omicron,960,pi,961,rho,962,sigmaf,963,sigma,964,tau,965,upsilon,966,phi,967,chi,968,psi,969,omega,977,thetasym,978,upsih,982,piv,8226,bull,8230,hellip,8242,prime,8243,Prime,8254,oline,8260,frasl,8472,weierp,8465,image,8476,real,8482,trade,8501,alefsym,8592,larr,8593,uarr,8594,rarr,8595,darr,8596,harr,8629,crarr,8656,lArr,8657,uArr,8658,rArr,8659,dArr,8660,hArr,8704,forall,8706,part,8707,exist,8709,empty,8711,nabla,8712,isin,8713,notin,8715,ni,8719,prod,8721,sum,8722,minus,8727,lowast,8730,radic,8733,prop,8734,infin,8736,ang,8743,and,8744,or,8745,cap,8746,cup,8747,int,8756,there4,8764,sim,8773,cong,8776,asymp,8800,ne,8801,equiv,8804,le,8805,ge,8834,sub,8835,sup,8836,nsub,8838,sube,8839,supe,8853,oplus,8855,otimes,8869,perp,8901,sdot,8968,lceil,8969,rceil,8970,lfloor,8971,rfloor,9001,lang,9002,rang,9674,loz,9824,spades,9827,clubs,9829,hearts,9830,diams,338,OElig,339,oelig,352,Scaron,353,scaron,376,Yuml,710,circ,732,tilde,8194,ensp,8195,emsp,8201,thinsp,8204,zwnj,8205,zwj,8206,lrm,8207,rlm,8211,ndash,8212,mdash,8216,lsquo,8217,rsquo,8218,sbquo,8220,ldquo,8221,rdquo,8222,bdquo,8224,dagger,8225,Dagger,8240,permil,8249,lsaquo,8250,rsaquo,8364,euro",bool_attrs:/(checked|disabled|readonly|selected|nowrap)/,valid_elements:"*[*]",extended_valid_elements:0,valid_child_elements:0,invalid_elements:0,fix_table_elements:0,fix_list_elements:!0,fix_content_duplication:!0,convert_fonts_to_spans:!1,font_size_classes:0,font_size_style_values:0,apply_source_formatting:0,indent_mode:"simple",indent_char:"\t",indent_levels:1,remove_linebreaks:1,remove_redundant_brs:1,element_format:"xhtml"},e),d.dom=e.dom,e.remove_redundant_brs&&d.onPostProcess.add(function(e,t){t.content=t.content.replace(/<br \/>(\s*<\/li>)/g,"$1")}),"html"==e.element_format&&d.onPostProcess.add(function(e,t){t.content=t.content.replace(/<([^>]+) \/>/g,"<$1>")}),e.fix_list_elements&&d.onPreProcess.add(function(e,t){var n,i,o,s,r,a,c=["ol","ul"],l=/^(OL|UL)$/;for(i=0;i<c.length;i++)for(n=d.dom.select(c[i],t.node),o=0;o<n.length;o++)r=(s=n[o]).parentNode,l.test(r.nodeName)&&((a=function(e,t){for(var n,i=t.split(",");null!=(e=e.previousSibling);)for(n=0;n<i.length;n++)if(e.nodeName==i[n])return e;return null}(s,"LI"))?a.appendChild(s):((a=d.dom.create("li")).innerHTML="&nbsp;",a.appendChild(s),r.insertBefore(a,r.firstChild)))}),e.fix_table_elements&&d.onPreProcess.add(function(e,t){m(d.dom.select("table",t.node),function(e){var t,n,i,o,s,r=d.dom.getParent(e,"H1,H2,H3,H4,H5,H6,P"),a=[];if(r){for(t=r.cloneNode(!1),a.push(e),n=e;(n=n.parentNode)&&(a.push(n),n!=r););for(i=t,o=a.length-1;0<=o;o--)if(o==a.length-1)for(;s=a[o-1].nextSibling;)i.appendChild(s.parentNode.removeChild(s));else{if(n=a[o].cloneNode(!1),0!=o)for(;s=a[o-1].nextSibling;)n.appendChild(s.parentNode.removeChild(s));i=i.appendChild(n)}e=d.dom.insertAfter(e.parentNode.removeChild(e),r),d.dom.insertAfter(e,r),d.dom.insertAfter(t,e)}})})},setEntities:function(e){var t,n,i,o={},s="";if(!this.entityLookup){for(t=e.split(","),n=0;n<t.length;n+=2)34!=(i=t[n])&&38!=i&&60!=i&&62!=i&&(o[String.fromCharCode(t[n])]=t[n+1],i=parseInt(t[n]).toString(16),s+="\\u"+"0000".substring(i.length)+i);s?(this.entitiesRE=new RegExp("["+s+"]","g"),this.entityLookup=o):this.settings.entity_encoding="raw"}},setValidChildRules:function(e){this.childRules=null,this.addValidChildRules(e)},addValidChildRules:function(n){var i,o,s,r=this;n&&(i="A|BR|SPAN|BDO|MAP|OBJECT|IMG|TT|I|B|BIG|SMALL|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|#text|#comment",o="A|BR|SPAN|BDO|OBJECT|APPLET|IMG|MAP|IFRAME|TT|I|B|U|S|STRIKE|BIG|SMALL|FONT|BASEFONT|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|INPUT|SELECT|TEXTAREA|LABEL|BUTTON|#text|#comment",s="H[1-6]|P|DIV|ADDRESS|PRE|FORM|TABLE|LI|OL|UL|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|FORM|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP",m(n.split(","),function(t){var n,e=t.split(/\[|\]/);t="",m(e[1].split("|"),function(e){switch(t&&(t+="|"),e){case"%itrans":e=o;break;case"%itrans_na":e=o.substring(2);break;case"%istrict":e=i;break;case"%istrict_na":e=i.substring(2);break;case"%btrans":case"%bstrict":e=s}t+=e}),n=new RegExp("^("+t.toLowerCase()+")$","i"),m(e[0].split("/"),function(e){r.childRules=r.childRules||{},r.childRules[e]=n})}),n="",m(r.childRules,function(e,t){n&&(n+="|"),n+=t}),r.parentElementsRE=new RegExp("^("+n.toLowerCase()+")$","i"))},setRules:function(e){var t=this;return t._setup(),t.rules={},t.wildRules=[],t.validElements={},t.addRules(e)},addRules:function(n){var d,u=this;n&&(u._setup(),m(n.split(","),function(e){var s,r,a,e=e.split(/\[|\]/),c=e[0].split("/"),l=[];d&&(r=tinymce.extend([],d.attribs)),1<e.length&&m(e[1].split("|"),function(e){var t,n={};if(r=r||[],e=e.replace(/::/g,"~"),(e=/^([!\-])?([\w*.?~_\-]+|)([=:<])?(.+)?$/.exec(e))[2]=e[2].replace(/~/g,":"),"!"==e[1]&&(s=s||[]).push(e[2]),"-"==e[1])for(t=0;t<r.length;t++)if(r[t].name==e[2])return void r.splice(t,1);switch(e[3]){case"=":n.defaultVal=e[4]||"";break;case":":n.forcedVal=e[4];break;case"<":n.validVals=e[4].split("?")}/[*.?]/.test(e[2])?(a=a||[],n.nameRE=new RegExp("^"+h(e[2])+"$"),a.push(n)):(n.name=e[2],r.push(n)),l.push(e[2])}),m(c,function(t,e){var n=t.charAt(0),i=1,o={};switch(d&&(d.noEmpty&&(o.noEmpty=d.noEmpty),d.fullEnd&&(o.fullEnd=d.fullEnd),d.padd&&(o.padd=d.padd)),n){case"-":o.noEmpty=!0;break;case"+":o.fullEnd=!0;break;case"#":o.padd=!0;break;default:i=0}c[e]=t=t.substring(i),u.validElements[t]=1,/[*.?]/.test(c[0])?(o.nameRE=new RegExp("^"+h(c[0])+"$"),u.wildRules=u.wildRules||{},u.wildRules.push(o)):(o.name=c[0],"@"==c[0]&&(d=o),u.rules[t]=o),o.attribs=r,s&&(o.requiredAttribs=s),a&&(t="",m(l,function(e){t&&(t+="|"),t+="("+h(e)+")"}),o.validAttribsRE=new RegExp("^"+t.toLowerCase()+"$"),o.wildAttribs=a)})}),n="",m(u.validElements,function(e,t){n&&(n+="|"),"@"!=t&&(n+=t)}),u.validElementsRE=new RegExp("^("+h(n.toLowerCase())+")$"))},findRule:function(e){var t,n,i=this.rules;if(this._setup(),n=i[e])return n;for(i=this.wildRules,t=0;t<i.length;t++)if(i[t].nameRE.test(e))return i[t];return null},findAttribRule:function(e,t){for(var n=e.wildAttribs,i=0;i<n.length;i++)if(n[i].nameRE.test(t))return n[i];return null},serialize:function(e,t){var n=this;return n._setup(),(t=t||{}).format=t.format||"html",n.processObj=t,e=e.cloneNode(!0),n.key=""+(parseInt(n.key)+1),t.no_events||(t.node=e,n.onPreProcess.dispatch(n,t)),n.writer.reset(),n._serializeNode(e,t.getInner),t.content=n.writer.getContent(),t.no_events||n.onPostProcess.dispatch(n,t),n._postProcess(t),t.node=null,tinymce.trim(t.content)},_postProcess:function(e){var t,n=this.settings,i=e.content;"html"==e.format&&(i=(t=this._protect({content:i,patterns:[{pattern:/(<script[^>]*>)(.*?)(<\/script>)/g},{pattern:/(<style[^>]*>)(.*?)(<\/style>)/g},{pattern:/(<pre[^>]*>)(.*?)(<\/pre>)/g,encode:1},{pattern:/(<!--\[CDATA\[)(.*?)(\]\]-->)/g}]})).content,"raw"!==n.entity_encoding&&(i=this._encode(i)),e.set||(i=i.replace(/<p>\s+<\/p>|<p([^>]+)>\s+<\/p>/g,"numeric"==n.entity_encoding?"<p$1>&#160;</p>":"<p$1>&nbsp;</p>"),n.remove_linebreaks&&(i=(i=(i=(i=(i=(i=i.replace(/\r?\n|\r/g," ")).replace(/(<[^>]+>)\s+/g,"$1 ")).replace(/\s+(<\/[^>]+>)/g," $1")).replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object) ([^>]+)>\s+/g,"<$1 $2>")).replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>\s+/g,"<$1>")).replace(/\s+<\/(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>/g,"</$1>")),n.apply_source_formatting&&"simple"==n.indent_mode&&(i=(i=(i=(i=i.replace(/<(\/?)(ul|hr|table|meta|link|tbody|tr|object|body|head|html|map)(|[^>]+)>\s*/g,"\n<$1$2$3>\n")).replace(/\s*<(p|h[1-6]|blockquote|div|title|style|pre|script|td|li|area)(|[^>]+)>/g,"\n<$1$2>")).replace(/<\/(p|h[1-6]|blockquote|div|title|style|pre|script|td|li)>\s*/g,"</$1>\n")).replace(/\n\n/g,"\n"))),i=(i=this._unprotect(i,t)).replace(/<!--\[CDATA\[([\s\S]+)\]\]-->/g,"<![CDATA[$1]]>"),"raw"==n.entity_encoding&&(i=i.replace(/<p>&nbsp;<\/p>|<p([^>]+)>&nbsp;<\/p>/g,"<p$1></p>"))),e.content=i},_serializeNode:function(e,t){var n,i,o,s,r,a,c,l,d,u,m,h,f,p=this,g=p.settings,y=p.writer;if(!g.node_filter||g.node_filter(e))switch(e.nodeType){case 1:if(e.hasAttribute?e.hasAttribute("mce_bogus"):e.getAttribute("mce_bogus"))return;if(m=!1,n=e.hasChildNodes(),l=e.getAttribute("mce_name")||e.nodeName.toLowerCase(),0===(l=v&&"HTML"!==e.scopeName&&"html"!==e.scopeName?e.scopeName+":"+l:l).indexOf("mce:")&&(l=l.substring(4)),!p.validElementsRE.test(l)||p.invalidElementsRE&&p.invalidElementsRE.test(l)||t){m=!0;break}if(v){if(g.fix_content_duplication){if(e.mce_serialized==p.key)return;e.mce_serialized=p.key}"/"==l.charAt(0)&&(l=l.substring(1))}else if(_&&"BR"===e.nodeName&&"_moz"==e.getAttribute("type"))return;if(p.childRules){if(p.parentElementsRE.test(p.elementName)&&!p.childRules[p.elementName].test(l)){m=!0;break}p.elementName=l}if(l=(d=p.findRule(l)).name||l,!n&&d.noEmpty||v&&!l){m=!0;break}if(d.requiredAttribs){for(o=(r=d.requiredAttribs).length-1;0<=o&&""===this.dom.getAttrib(e,r[o]);o--);if(-1==o){m=!0;break}}if(y.writeStartElement(l),d.attribs)for(o=0,s=(a=d.attribs).length;o<s;o++)r=a[o],null!==(c=p._getAttrib(e,r))&&y.writeAttribute(r.name,c);if(d.validAttribsRE)for(o=(a=v?(f=[],"OBJECT"==(h=e).nodeName?h.attributes:(h.cloneNode(!1).outerHTML.replace(/([a-z0-9\:\-_]+)=/gi,function(e,t){f.push({specified:1,nodeName:t})}),f)):e.attributes).length-1;-1<o;o--)(u=a[o]).specified&&(r=u.nodeName.toLowerCase(),!g.invalid_attrs.test(r)&&d.validAttribsRE.test(r)&&(u=p.findAttribRule(d,r),null!==(c=p._getAttrib(e,u,r))&&y.writeAttribute(r,c)));d.padd&&(n&&(i=e.firstChild)&&1===i.nodeType&&1===e.childNodes.length?(i.hasAttribute?i.hasAttribute("mce_bogus"):i.getAttribute("mce_bogus"))&&y.writeText(""):n||y.writeText(""));break;case 3:return p.childRules&&p.parentElementsRE.test(p.elementName)&&!p.childRules[p.elementName].test(e.nodeName)?void 0:y.writeText(e.nodeValue);case 4:return y.writeCDATA(e.nodeValue);case 8:return y.writeComment(e.nodeValue)}else 1==e.nodeType&&(n=e.hasChildNodes());if(n)for(i=e.firstChild;i;)p._serializeNode(i),p.elementName=l,i=i.nextSibling;m||(n||!g.closed.test(l)?y.writeFullEndElement():y.writeEndElement())},_protect:function(s){var r=this;function a(e){return e.replace(/\\[\\rn]/g,function(e){return"\\n"===e?"\n":"\\\\"===e?"\\":"\r"})}return s.items=s.items||[],m(s.patterns,function(o){s.content=a(s.content.replace(/[\r\n\\]/g,function(e){return"\n"===e?"\\n":"\\"===e?"\\\\":"\\r"}).replace(o.pattern,function(e,t,n,i){return n=a(n),o.encode&&(n=r._encode(n)),s.items.push(n),t+"\x3c!--mce:"+(s.items.length-1)+"--\x3e"+i}))}),s},_unprotect:function(e,n){return e=e.replace(/\<!--mce:([0-9]+)--\>/g,function(e,t){return n.items[parseInt(t)]}),n.items=[],e},_encode:function(e){var n,t=this.settings;return"raw"!==t.entity_encoding&&(-1!=t.entity_encoding.indexOf("named")&&(this.setEntities(t.entities),n=this.entityLookup,e=e.replace(this.entitiesRE,function(e){var t;return e=(t=n[e])?"&"+t+";":e})),-1!=t.entity_encoding.indexOf("numeric")&&(e=e.replace(/[\u007E-\uFFFF]/g,function(e){return"&#"+e.charCodeAt(0)+";"}))),e},_setup:function(){var e=this,t=this.settings;e.done||(e.done=1,e.setRules(t.valid_elements),e.addRules(t.extended_valid_elements),e.addValidChildRules(t.valid_child_elements),t.invalid_elements&&(e.invalidElementsRE=new RegExp("^("+h(t.invalid_elements.replace(/,/g,"|").toLowerCase())+")$")),t.attrib_value_filter&&(e.attribValueFilter=t.attribValueFilter))},_getAttrib:function(e,t,n){var i,o;if(n=n||t.name,t.forcedVal&&(o=t.forcedVal))return"{$uid}"===o?this.dom.uniqueId():o;if(o=this.dom.getAttrib(e,n),this.settings.bool_attrs.test(n)&&o){if("false"===(o=(""+o).toLowerCase())||"0"===o)return null;o=n}switch(n){case"rowspan":case"colspan":"1"==o&&(o="")}if(this.attribValueFilter&&(o=this.attribValueFilter(n,o,e)),t.validVals){for(i=t.validVals.length-1;0<=i&&o!=t.validVals[i];i--);if(-1==i)return null}return""===o&&void 0!==t.defaultVal?"{$uid}"===(o=t.defaultVal)?this.dom.uniqueId():o:""===(o="class"==n&&this.processObj.get?o.replace(/\s?mceItem\w+\s?/g,""):o)?null:o}})}(),function(){var each=tinymce.each,Event=tinymce.dom.Event;tinymce.create("tinymce.dom.ScriptLoader",{ScriptLoader:function(e){this.settings=e||{},this.queue=[],this.lookup={}},isDone:function(e){return this.lookup[e]?2==this.lookup[e].state:0},markDone:function(e){this.lookup[e]={state:2,url:e}},add:function(e,t,n,i){var o,s=this.lookup;return(o=s[e])?(t&&2==o.state&&t.call(n||this),o):(o={state:0,url:e,func:t,scope:n||this},i?this.queue.unshift(o):this.queue.push(o),s[e]=o)},load:function(e,t,n){var i,o=this;if(i=o.lookup[e])return t&&2==i.state&&t.call(n||o),i;function s(e){Event.domLoaded||o.settings.strict_mode?tinymce.util.XHR.send({url:tinymce._addVer(e),error:o.settings.error,async:!1,success:function(e){o.eval(e)}}):document.write('<script type="text/javascript" src="'+tinymce._addVer(e)+'"><\/script>')}tinymce.is(e,"string")?s(e):each(e,function(e){s(e)}),t&&t.call(n||o)},loadQueue:function(e,t){var n=this;n.queueLoading?e&&n.queueCallbacks.push({func:e,scope:t||n}):(n.queueLoading=1,n.queueCallbacks=[],n.loadScripts(n.queue,function(){n.queueLoading=0,e&&e.call(t||n),each(n.queueCallbacks,function(e){e.func.call(e.scope)})}))},eval:function(co){var w=window;if(w.execScript)w.execScript(co);else try{eval.call(w,co)}catch(ex){eval(co,w)}},loadScripts:function(e,o,n){var s=this,r=s.lookup;function a(e){e.state=2,e.func&&e.func.call(e.scope||s)}function c(){var t=e.length;each(e,function(e){2===(e=r[e.url]).state?(a(e),t--):l(e)}),0===t&&o&&(o.call(n||s),o=0)}function l(e){0<e.state||(e.state=1,tinymce.dom.ScriptLoader.loadScript(e.url,function(){a(e),c()}))}each(e,function(e){var t,n,i=e.url;r[i]?e=r[i]:(r[i]=e,s.queue.push(e)),0<e.state||(Event.domLoaded||s.settings.strict_mode?l(e):(n="",(o||e.func)&&(e.state=1,t=tinymce.dom.ScriptLoader._addOnLoad(function(){a(e),c()}),n=tinymce.isIE?' onreadystatechange="':' onload="',n+="tinymce.dom.ScriptLoader._onLoad(this,'"+i+"',"+t+');"'),document.write('<script type="text/javascript" src="'+tinymce._addVer(i)+'"'+n+"><\/script>"),e.func||a(e)))}),c()},static:{_addOnLoad:function(e){return this._funcs=this._funcs||[],this._funcs.push(e),this._funcs.length-1},_onLoad:function(e,t,n){tinymce.isIE&&"complete"!=e.readyState||this._funcs[n].call(this)},loadScript:function(e,t){var n,i=tinymce.DOM.uniqueId();function o(){Event.clear(i),tinymce.DOM.remove(i),t&&(t.call(document,e),t=0)}tinymce.isIE?tinymce.util.XHR.send({url:tinymce._addVer(e),async:!1,success:function(e){window.execScript(e),o()}}):(n=tinymce.DOM.create("script",{id:i,type:"text/javascript",src:tinymce._addVer(e)}),Event.add(n,"load",o),(document.getElementsByTagName("head")[0]||document.body).appendChild(n))}}}),tinymce.ScriptLoader=new tinymce.dom.ScriptLoader}(),function(){var i=tinymce.DOM,n=tinymce.is;tinymce.create("tinymce.ui.Control",{Control:function(e,t){this.id=e,this.settings=t=t||{},this.rendered=!1,this.onRender=new tinymce.util.Dispatcher(this),this.classPrefix="",this.scope=t.scope||this,this.disabled=0,this.active=0},setDisabled:function(e){var t;e!=this.disabled&&((t=i.get(this.id))&&this.settings.unavailable_prefix&&(e?(this.prevTitle=t.title,t.title=this.settings.unavailable_prefix+": "+t.title):t.title=this.prevTitle),this.setState("Disabled",e),this.setState("Enabled",!e),this.disabled=e)},isDisabled:function(){return this.disabled},setActive:function(e){e!=this.active&&(this.setState("Active",e),this.active=e)},isActive:function(){return this.active},setState:function(e,t){var n=i.get(this.id);e=this.classPrefix+e,t?i.addClass(n,e):i.removeClass(n,e)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(e){i.setHTML(e,this.renderHTML())},postRender:function(){var e,t=this;n(t.disabled)&&(e=t.disabled,t.disabled=-1,t.setDisabled(e)),n(t.active)&&(e=t.active,t.active=-1,t.setActive(e))},remove:function(){i.remove(this.id),this.destroy()},destroy:function(){tinymce.dom.Event.clear(this.id)}})}(),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(e,t){this.parent(e,t),this.controls=[],this.lookup={}},add:function(e){return this.lookup[e.id]=e,this.controls.push(e),e},get:function(e){return this.lookup[e]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(e,t){this.parent(e,t),this.classPrefix="mceSeparator"},renderHTML:function(){return tinymce.DOM.createHTML("span",{class:this.classPrefix})}}),function(){var e=tinymce.is;tinymce.DOM,tinymce.each,tinymce.walk;tinymce.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(e,t){this.parent(e,t),this.classPrefix="mceMenuItem"},setSelected:function(e){this.setState("Selected",e),this.selected=e},isSelected:function(){return this.selected},postRender:function(){this.parent(),e(this.selected)&&this.setSelected(this.selected)}})}(),function(){tinymce.is;var t=tinymce.DOM,n=(tinymce.each,tinymce.walk);tinymce.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(e,t){var n=this;n.parent(e,t),n.items={},n.collapsed=!1,n.menuCount=0,n.onAddItem=new tinymce.util.Dispatcher(this)},expand:function(e){e&&n(this,function(e){e.expand&&e.expand()},"items",this),this.collapsed=!1},collapse:function(e){e&&n(this,function(e){e.collapse&&e.collapse()},"items",this),this.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(e){return e.settings||(e=new tinymce.ui.MenuItem(e.id||t.uniqueId(),e)),this.onAddItem.dispatch(this,e),this.items[e.id]=e},addSeparator:function(){return this.add({separator:!0})},addMenu:function(e){return e.collapse||(e=this.createMenu(e)),this.menuCount++,this.add(e)},hasMenus:function(){return 0!==this.menuCount},remove:function(e){delete this.items[e.id]},removeAll:function(){n(this,function(e){e.removeAll?e.removeAll():e.remove(),e.destroy()},"items",this),this.items={}},createMenu:function(e){e=new tinymce.ui.Menu(e.id||t.uniqueId(),e);return e.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),e}})}(),function(){var n=tinymce.is,m=tinymce.DOM,h=tinymce.each,f=tinymce.dom.Event,p=tinymce.dom.Element;tinymce.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(e,t){(t=t||{}).container=t.container||m.doc.body,t.offset_x=t.offset_x||0,t.offset_y=t.offset_y||0,t.vp_offset_x=t.vp_offset_x||0,t.vp_offset_y=t.vp_offset_y||0,n(t.icons)&&!t.icons&&(t.class+=" mceNoIcons"),this.parent(e,t),this.onShowMenu=new tinymce.util.Dispatcher(this),this.onHideMenu=new tinymce.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(e){var t=this.settings;return e.container=e.container||t.container,e.parent=this,e.constrain=e.constrain||t.constrain,e.class=e.class||t.class,e.vp_offset_x=e.vp_offset_x||t.vp_offset_x,e.vp_offset_y=e.vp_offset_y||t.vp_offset_y,(e=new tinymce.ui.DropMenu(e.id||m.uniqueId(),e)).onAddItem.add(this.onAddItem.dispatch,this.onAddItem),e},update:function(){var e=this,t=e.settings,n=m.get("menu_"+e.id+"_tbl"),i=m.get("menu_"+e.id+"_co"),o=t.max_width?Math.min(n.clientWidth,t.max_width):n.clientWidth,s=t.max_height?Math.min(n.clientHeight,t.max_height):n.clientHeight;m.boxModel?e.element.setStyles({width:o,height:s}):e.element.setStyles({width:o+2,height:s+2}),t.max_width&&m.setStyle(i,"width",o),t.max_height&&(m.setStyle(i,"height",s),n.clientHeight<t.max_height&&m.setStyle(i,"overflow","hidden"))},showMenu:function(e,t,n){var i,o,s,r,a,c=this,l=c.settings,d=m.getViewPort(),u=c.classPrefix;c.collapse(1),c.isMenuVisible||(c.rendered?i=m.get("menu_"+c.id):(i=m.add(c.settings.container,c.renderNode()),h(c.items,function(e){e.postRender()}),c.element=new p("menu_"+c.id,{blocker:1,container:l.container})),tinymce.isOpera||m.setStyles(i,{left:-65535,top:-65535}),m.show(i),c.update(),e+=l.offset_x||0,t+=l.offset_y||0,d.w-=4,d.h-=4,l.constrain&&(o=i.clientWidth-2,s=i.clientHeight-2,r=d.x+d.w,d=d.y+d.h,e+l.vp_offset_x+o>r&&(e=n?n-o:Math.max(0,r-l.vp_offset_x-o)),t+l.vp_offset_y+s>d&&(t=Math.max(0,d-l.vp_offset_y-s))),m.setStyles(i,{left:e,top:t}),c.element.update(),c.isMenuVisible=1,c.mouseClickFunc=f.add(i,"click",function(e){var t;if(e=e.target,(e=e&&m.getParent(e,"TR"))&&!m.hasClass(e,u+"ItemSub")&&!(t=c.items[e.id]).isDisabled()){for(a=c;a;)a.hideMenu&&a.hideMenu(),a=a.settings.parent;return t.settings.onclick&&t.settings.onclick(e),f.cancel(e)}}),c.hasMenus()&&(c.mouseOverFunc=f.add(i,"mouseover",function(e){var t;(e=(e=e.target)&&m.getParent(e,"TR"))&&(t=c.items[e.id],c.lastMenu&&c.lastMenu.collapse(1),t.isDisabled()||e&&m.hasClass(e,u+"ItemSub")&&(e=m.getRect(e),t.showMenu(e.x+e.w-2,e.y-2,e.x),c.lastMenu=t,m.addClass(m.get(t.id).firstChild,u+"ItemActive")))})),c.onShowMenu.dispatch(c),l.keyboard_focus&&(f.add(i,"keydown",c._keyHandler,c),m.select("a","menu_"+c.id)[0].focus(),c._focusIdx=0))},hideMenu:function(e){var t=this,n=m.get("menu_"+t.id);t.isMenuVisible&&(f.remove(n,"mouseover",t.mouseOverFunc),f.remove(n,"click",t.mouseClickFunc),f.remove(n,"keydown",t._keyHandler),m.hide(n),t.isMenuVisible=0,e||t.collapse(1),t.element&&t.element.hide(),(e=m.get(t.id))&&m.removeClass(e.firstChild,t.classPrefix+"ItemActive"),t.onHideMenu.dispatch(t))},add:function(e){var t;return e=this.parent(e),this.isRendered&&(t=m.get("menu_"+this.id))&&this._add(m.select("tbody",t)[0],e),e},collapse:function(e){this.parent(e),this.hideMenu(1)},remove:function(e){return m.remove(e.id),this.destroy(),this.parent(e)},destroy:function(){var e=this,t=m.get("menu_"+e.id);f.remove(t,"mouseover",e.mouseOverFunc),f.remove(t,"click",e.mouseClickFunc),e.element&&e.element.remove(),m.remove(t)},renderNode:function(){var t,n=this,e=n.settings,i=m.create("div",{id:"menu_"+n.id,class:e.class,style:"position:absolute;left:0;top:0;z-index:200000"}),o=m.add(i,"div",{id:"menu_"+n.id+"_co",class:n.classPrefix+(e.class?" "+e.class:"")});return n.element=new p("menu_"+n.id,{blocker:1,container:e.container}),e.menu_line&&m.add(o,"span",{class:n.classPrefix+"Line"}),o=m.add(o,"table",{id:"menu_"+n.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),t=m.add(o,"tbody"),h(n.items,function(e){n._add(t,e)}),n.rendered=!0,i},_keyHandler:function(e){var n=this;function t(e){var t=n._focusIdx+e,e=m.select("a","menu_"+n.id)[t];e&&(n._focusIdx=t,e.focus())}switch(e.keyCode){case 38:return void t(-1);case 40:return void t(1);case 13:return;case 27:return this.hideMenu()}},_add:function(e,t){var n,i,o,s=t.settings,r=this.classPrefix;if(s.separator)return i=m.add(e,"tr",{id:t.id,class:r+"ItemSeparator"}),m.add(i,"td",{class:r+"ItemSeparator"}),void((n=i.previousSibling)&&m.addClass(n,"mceLast"));n=i=m.add(e,"tr",{id:t.id,class:r+"Item "+r+"ItemEnabled"}),n=o=m.add(n,"td"),n=m.add(n,"a",{href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),m.addClass(o,s.class),o=m.add(n,"span",{class:"mceIcon"+(s.icon?" mce_"+s.icon:"")}),s.icon_src&&m.add(o,"img",{src:s.icon_src}),n=m.add(n,s.element||"span",{class:"mceText",title:t.settings.title},t.settings.title),t.settings.style&&m.setAttrib(n,"style",t.settings.style),1==e.childNodes.length&&m.addClass(i,"mceFirst"),(n=i.previousSibling)&&m.hasClass(n,r+"ItemSeparator")&&m.addClass(i,"mceFirst"),t.collapse&&m.addClass(i,r+"ItemSub"),(n=i.previousSibling)&&m.removeClass(n,"mceLast"),m.addClass(i,"mceLast")}})}(),function(){var o=tinymce.DOM;tinymce.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,t){this.parent(e,t),this.classPrefix="mceButton"},renderHTML:function(){var e=this.classPrefix,t=this.settings,n=o.encode(t.label||""),i='<a id="'+this.id+'" href="javascript:;" class="'+e+" "+e+"Enabled "+t.class+(n?" "+e+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" title="'+o.encode(t.title)+'">';return t.image?i+='<img class="mceIcon" src="'+t.image+'" />'+n+"</a>":i+='<span class="mceIcon '+t.class+'"></span>'+(n?'<span class="'+e+'Label">'+n+"</span>":"")+"</a>",i},postRender:function(){var t=this,n=t.settings;tinymce.dom.Event.add(t.id,"click",function(e){if(!t.isDisabled())return n.onclick.call(n.scope,e)})}})}(),function(){var s=tinymce.DOM,r=tinymce.dom.Event,a=tinymce.each,i=tinymce.util.Dispatcher;tinymce.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(e,t){var n=this;n.parent(e,t),n.items=[],n.onChange=new i(n),n.onPostRender=new i(n),n.onAdd=new i(n),n.onRenderMenu=new tinymce.util.Dispatcher(this),n.classPrefix="mceListBox"},select:function(t){var n,i,o=this;if(null==t)return o.selectByIndex(-1);i=t&&t.call?t:function(e){return e==t},t!=o.selectedValue&&(a(o.items,function(e,t){if(i(e.value))return n=1,o.selectByIndex(t),!1}),n||o.selectByIndex(-1))},selectByIndex:function(e){var t,n,i=this;e!=i.selectedIndex?(t=s.get(i.id+"_text"),(n=i.items[e])?(i.selectedValue=n.value,i.selectedIndex=e,s.setHTML(t,s.encode(n.title)),s.removeClass(t,"mceTitle")):(s.setHTML(t,s.encode(i.settings.title)),s.addClass(t,"mceTitle"),i.selectedValue=i.selectedIndex=null),t=0):i.selectedValue=i.selectedIndex=null},add:function(e,t,n){n=n||{},n=tinymce.extend(n,{title:e,value:t}),this.items.push(n),this.onAdd.dispatch(this,n)},getLength:function(){return this.items.length},renderHTML:function(){var e=this,t=e.settings,n=e.classPrefix,i='<table id="'+e.id+'" cellpadding="0" cellspacing="0" class="'+n+" "+n+"Enabled"+(t.class?" "+t.class:"")+'"><tbody><tr>';return i+="<td>"+s.createHTML("a",{id:e.id+"_text",href:"javascript:;",class:"mceText",onclick:"return false;",onmousedown:"return false;"},s.encode(e.settings.title))+"</td>",i+="<td>"+s.createHTML("a",{id:e.id+"_open",tabindex:-1,href:"javascript:;",class:"mceOpen",onclick:"return false;",onmousedown:"return false;"},"<span></span>")+"</td>",i+="</tr></tbody></table>"},showMenu:function(){var e,t,n=this,i=s.get(this.id);if(!n.isDisabled()&&0!=n.items.length){if(n.menu&&n.menu.isMenuVisible)return n.hideMenu();n.isMenuRendered||(n.renderMenu(),n.isMenuRendered=!0),s.getPos(this.settings.menu_container),e=s.getPos(i),(t=n.menu).settings.offset_x=e.x,t.settings.offset_y=e.y,t.settings.keyboard_focus=!tinymce.isOpera,n.oldID&&t.items[n.oldID].setSelected(0),a(n.items,function(e){e.value===n.selectedValue&&(t.items[e.id].setSelected(1),n.oldID=e.id)}),t.showMenu(0,i.clientHeight),r.add(s.doc,"mousedown",n.hideMenu,n),s.addClass(n.id,n.classPrefix+"Selected")}},hideMenu:function(e){var t=this;e&&"mousedown"==e.type&&(e.target.id==t.id+"_text"||e.target.id==t.id+"_open")||e&&s.getParent(e.target,function(e){return s.hasClass(e,"mceMenu")})||(s.removeClass(t.id,t.classPrefix+"Selected"),r.remove(s.doc,"mousedown",t.hideMenu,t),t.menu&&t.menu.hideMenu())},renderMenu:function(){var t=this,n=t.settings.control_manager.createDropMenu(t.id+"_menu",{menu_line:1,class:t.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});n.onHideMenu.add(t.hideMenu,t),n.add({title:t.settings.title,class:"mceMenuItemTitle",onclick:function(){!1!==t.settings.onselect("")&&t.select("")}}),a(t.items,function(e){e.id=s.uniqueId(),e.onclick=function(){!1!==t.settings.onselect(e.value)&&t.select(e.value)},n.add(e)}),t.onRenderMenu.dispatch(t,n),t.menu=n},postRender:function(){var o=this,e=o.classPrefix;r.add(o.id,"click",o.showMenu,o),r.add(o.id+"_text","focus",function(e){o._focused||(o.keyDownHandler=r.add(o.id+"_text","keydown",function(e){var t,n=-1,i=e.keyCode;if(a(o.items,function(e,t){o.selectedValue==e.value&&(n=t)}),38==i)t=o.items[n-1];else if(40==i)t=o.items[n+1];else if(13==i)return t=o.selectedValue,o.selectedValue=null,o.settings.onselect(t),r.cancel(e);t&&(o.hideMenu(),o.select(t.value))})),o._focused=1}),r.add(o.id+"_text","blur",function(){r.remove(o.id+"_text","keydown",o.keyDownHandler),o._focused=0}),!tinymce.isIE6&&s.boxModel||(r.add(o.id,"mouseover",function(){s.hasClass(o.id,e+"Disabled")||s.addClass(o.id,e+"Hover")}),r.add(o.id,"mouseout",function(){s.hasClass(o.id,e+"Disabled")||s.removeClass(o.id,e+"Hover")})),o.onPostRender.dispatch(o,s.get(o.id))},destroy:function(){this.parent(),r.clear(this.id+"_text")}})}(),function(){var o=tinymce.DOM,s=tinymce.dom.Event,e=tinymce.each;tinymce.util.Dispatcher;tinymce.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(e,t){this.parent(e,t),this.classPrefix="mceNativeListBox"},setDisabled:function(e){o.get(this.id).disabled=e},isDisabled:function(){return o.get(this.id).disabled},select:function(t){var n,i,o=this;if(null==t)return o.selectByIndex(-1);i=t&&t.call?t:function(e){return e==t},t!=o.selectedValue&&(e(o.items,function(e,t){if(i(e.value))return n=1,o.selectByIndex(t),!1}),n||o.selectByIndex(-1))},selectByIndex:function(e){o.get(this.id).selectedIndex=e+1,this.selectedValue=this.items[e]?this.items[e].value:null},add:function(e,t,n){(n=n||{}).value=t,this.isRendered()&&o.add(o.get(this.id),"option",n,e),n={title:e,value:t,attribs:n},this.items.push(n),this.onAdd.dispatch(this,n)},getLength:function(){return o.get(this.id).options.length-1},renderHTML:function(){var t=o.createHTML("option",{value:""},"-- "+this.settings.title+" --");return e(this.items,function(e){t+=o.createHTML("option",{value:e.value},e.title)}),t=o.createHTML("select",{id:this.id,class:"mceNativeListBox"},t)},postRender:function(){var n=this;function i(e){e=n.items[e.target.selectedIndex-1];(e=e&&e.value)&&(n.onChange.dispatch(n,e),n.settings.onselect&&n.settings.onselect(e))}n.rendered=!0,s.add(n.id,"change",i),s.add(n.id,"keydown",function(e){var t;if(s.remove(n.id,"change",void 0),t=s.add(n.id,"blur",function(){s.add(n.id,"change",i),s.remove(n.id,"blur",t)}),13==e.keyCode||32==e.keyCode)return i(e),s.cancel(e)}),n.onPostRender.dispatch(n,o.get(n.id))}})}(),function(){var o=tinymce.DOM,s=tinymce.dom.Event;tinymce.each;tinymce.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(e,t){this.parent(e,t),this.onRenderMenu=new tinymce.util.Dispatcher(this),t.menu_container=t.menu_container||o.doc.body},showMenu:function(){var e,t,n=this,i=o.get(n.id);if(!n.isDisabled()){if(n.isMenuRendered||(n.renderMenu(),n.isMenuRendered=!0),n.isMenuVisible)return n.hideMenu();o.getPos(n.settings.menu_container),e=o.getPos(i),(t=n.menu).settings.offset_x=e.x,t.settings.offset_y=e.y,t.settings.vp_offset_x=e.x,t.settings.vp_offset_y=e.y,t.settings.keyboard_focus=n._focused,t.showMenu(0,i.clientHeight),s.add(o.doc,"mousedown",n.hideMenu,n),n.setState("Selected",1),n.isMenuVisible=1}},renderMenu:function(){var e=this,t=e.settings.control_manager.createDropMenu(e.id+"_menu",{menu_line:1,class:this.classPrefix+"Menu",icons:e.settings.icons});t.onHideMenu.add(e.hideMenu,e),e.onRenderMenu.dispatch(e,t),e.menu=t},hideMenu:function(e){var t=this;e&&"mousedown"==e.type&&o.getParent(e.target,function(e){return e.id===t.id||e.id===t.id+"_open"})||(e&&o.getParent(e.target,function(e){return o.hasClass(e,"mceMenu")})||(t.setState("Selected",0),s.remove(o.doc,"mousedown",t.hideMenu,t),t.menu&&t.menu.hideMenu()),t.isMenuVisible=0)},postRender:function(){var e=this,t=e.settings;s.add(e.id,"click",function(){e.isDisabled()||(t.onclick&&t.onclick(e.value),e.showMenu())})}})}(),function(){var i=tinymce.DOM,n=tinymce.dom.Event;tinymce.each;tinymce.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(e,t){this.parent(e,t),this.classPrefix="mceSplitButton"},renderHTML:function(){var e=this.settings,t="<tbody><tr>",n=e.image?i.createHTML("img ",{src:e.image,class:"mceAction "+e.class}):i.createHTML("span",{class:"mceAction "+e.class},"");return t+="<td>"+i.createHTML("a",{id:this.id+"_action",href:"javascript:;",class:"mceAction "+e.class,onclick:"return false;",onmousedown:"return false;",title:e.title},n)+"</td>",n=i.createHTML("span",{class:"mceOpen "+e.class}),t+="<td>"+i.createHTML("a",{id:this.id+"_open",href:"javascript:;",class:"mceOpen "+e.class,onclick:"return false;",onmousedown:"return false;",title:e.title},n)+"</td>",t+="</tr></tbody>",i.createHTML("table",{id:this.id,class:"mceSplitButton mceSplitButtonEnabled "+e.class,cellpadding:"0",cellspacing:"0",onmousedown:"return false;",title:e.title},t)},postRender:function(){var e=this,t=e.settings;t.onclick&&n.add(e.id+"_action","click",function(){e.isDisabled()||t.onclick(e.value)}),n.add(e.id+"_open","click",e.showMenu,e),n.add(e.id+"_open","focus",function(){e._focused=1}),n.add(e.id+"_open","blur",function(){e._focused=0}),!tinymce.isIE6&&i.boxModel||(n.add(e.id,"mouseover",function(){i.hasClass(e.id,"mceSplitButtonDisabled")||i.addClass(e.id,"mceSplitButtonHover")}),n.add(e.id,"mouseout",function(){i.hasClass(e.id,"mceSplitButtonDisabled")||i.removeClass(e.id,"mceSplitButtonHover")}))},destroy:function(){this.parent(),n.clear(this.id+"_action"),n.clear(this.id+"_open")}})}(),function(){var c=tinymce.DOM,l=tinymce.dom.Event,d=tinymce.is,u=tinymce.each;tinymce.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(e,t){var n=this;n.parent(e,t),n.settings=t=tinymce.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},n.settings),n.onShowMenu=new tinymce.util.Dispatcher(n),n.onHideMenu=new tinymce.util.Dispatcher(n),n.value=t.default_color},showMenu:function(){var e,t,n=this;if(!n.isDisabled()){if(n.isMenuRendered||(n.renderMenu(),n.isMenuRendered=!0),n.isMenuVisible)return n.hideMenu();e=c.get(n.id),c.show(n.id+"_menu"),c.addClass(e,"mceSplitButtonSelected"),t=c.getPos(e),c.setStyles(n.id+"_menu",{left:t.x,top:t.y+e.clientHeight,zIndex:2e5}),l.add(c.doc,"mousedown",n.hideMenu,n),n._focused&&(n._keyHandler=l.add(n.id+"_menu","keydown",function(e){27==e.keyCode&&n.hideMenu()}),c.select("a",n.id+"_menu")[0].focus()),n.onShowMenu.dispatch(n),n.isMenuVisible=1}},hideMenu:function(e){var t=this;e&&"mousedown"==e.type&&c.getParent(e.target,function(e){return e.id===t.id+"_open"})||(e&&c.getParent(e.target,function(e){return c.hasClass(e,"mceSplitButtonMenu")})||(c.removeClass(t.id,"mceSplitButtonSelected"),l.remove(c.doc,"mousedown",t.hideMenu,t),l.remove(t.id+"_menu","keydown",t._keyHandler),c.hide(t.id+"_menu")),t.onHideMenu.dispatch(t),t.isMenuVisible=0)},renderMenu:function(){var t,n,i,o=this,s=0,r=o.settings,e=c.add(r.menu_container,"div",{id:o.id+"_menu",class:r.menu_class+" "+r.class,style:"position:absolute;left:0;top:-1000px;"}),a=c.add(e,"div",{class:r.class+" mceSplitButtonMenu"});return c.add(a,"span",{class:"mceMenuLine"}),t=c.add(a,"table",{class:"mceColorSplitMenu"}),n=c.add(t,"tbody"),s=0,u(d(r.colors,"array")?r.colors:r.colors.split(","),function(e){e=e.replace(/^#/,""),s--||(i=c.add(n,"tr"),s=r.grid_width-1),t=c.add(i,"td"),t=c.add(t,"a",{href:"javascript:;",style:{backgroundColor:"#"+e},mce_color:"#"+e})}),r.more_colors_func&&(t=c.add(n,"tr"),t=c.add(t,"td",{colspan:r.grid_width,class:"mceMoreColors"}),t=c.add(t,"a",{id:o.id+"_more",href:"javascript:;",onclick:"return false;",class:"mceMoreColors"},r.more_colors_title),l.add(t,"click",function(e){return r.more_colors_func.call(r.more_colors_scope||this),l.cancel(e)})),c.addClass(a,"mceColorSplitMenu"),l.add(o.id+"_menu","click",function(e){var t;return"A"==(e=e.target).nodeName&&(t=e.getAttribute("mce_color"))&&o.setColor(t),l.cancel(e)}),e},setColor:function(e){c.setStyle(this.id+"_preview","backgroundColor",e),this.value=e,this.hideMenu(),this.settings.onselect(e)},postRender:function(){var e=this.id;this.parent(),c.add(e+"_action","div",{id:e+"_preview",class:"mceColorPreview"}),c.setStyle(this.id+"_preview","backgroundColor",this.value)},destroy:function(){this.parent(),l.clear(this.id+"_menu"),l.clear(this.id+"_more"),c.remove(this.id+"_menu")}})}(),tinymce.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){for(var e,t,n,i,o="",s=tinymce.DOM,r=this.settings,a=this.controls,c=0;c<a.length;c++)t=a[c],n=a[c-1],i=a[c+1],0===c&&(e="mceToolbarStart",t.Button?e+=" mceToolbarStartButton":t.SplitButton?e+=" mceToolbarStartSplitButton":t.ListBox&&(e+=" mceToolbarStartListBox"),o+=s.createHTML("td",{class:e},s.createHTML("span",null,"\x3c!-- IE --\x3e"))),n&&t.ListBox&&(n.Button||n.SplitButton)&&(o+=s.createHTML("td",{class:"mceToolbarEnd"},s.createHTML("span",null,"\x3c!-- IE --\x3e"))),s.stdMode?o+='<td style="position: relative">'+t.renderHTML()+"</td>":o+="<td>"+t.renderHTML()+"</td>",i&&t.ListBox&&(i.Button||i.SplitButton)&&(o+=s.createHTML("td",{class:"mceToolbarStart"},s.createHTML("span",null,"\x3c!-- IE --\x3e")));return e="mceToolbarEnd",t.Button?e+=" mceToolbarEndButton":t.SplitButton?e+=" mceToolbarEndSplitButton":t.ListBox&&(e+=" mceToolbarEndListBox"),o+=s.createHTML("td",{class:e},s.createHTML("span",null,"\x3c!-- IE --\x3e")),s.createHTML("table",{id:this.id,class:"mceToolbar"+(r.class?" "+r.class:""),cellpadding:"0",cellspacing:"0",align:this.settings.align||""},"<tbody><tr>"+o+"</tr></tbody>")}}),function(){var e=tinymce.util.Dispatcher;tinymce.each;tinymce.create("tinymce.AddOnManager",{items:[],urls:{},lookup:{},onAdd:new e(this),get:function(e){return this.lookup[e]},requireLangPack:function(e){var t=tinymce.EditorManager.settings;t&&t.language&&(e=this.urls[e]+"/langs/"+t.language+".js",tinymce.dom.Event.domLoaded||t.strict_mode?tinymce.ScriptLoader.add(e):tinymce.ScriptLoader.load(e))},add:function(e,t){return this.items.push(t),this.lookup[e]=t,this.onAdd.dispatch(this,e,t),t},load:function(e,t,n,i){this.urls[e]||(0!=t.indexOf("/")&&-1==t.indexOf("://")&&(t=tinymce.baseURL+"/"+t),this.urls[e]=t.substring(0,t.lastIndexOf("/")),tinymce.ScriptLoader.add(t,n,i))}}),tinymce.PluginManager=new tinymce.AddOnManager,tinymce.ThemeManager=new tinymce.AddOnManager}(),function(){var d=tinymce.each,n=tinymce.extend,u=tinymce.DOM,i=tinymce.dom.Event,m=tinymce.ThemeManager,h=tinymce.PluginManager,f=tinymce.explode;tinymce.create("static tinymce.EditorManager",{editors:{},i18n:{},activeEditor:null,preInit:function(){var t=this,e=window.location;tinymce.documentBaseURL=e.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(tinymce.documentBaseURL)||(tinymce.documentBaseURL+="/"),tinymce.baseURL=new tinymce.util.URI(tinymce.documentBaseURL).toAbsolute(tinymce.baseURL),tinymce.EditorManager.baseURI=new tinymce.util.URI(tinymce.baseURL),document.domain&&e.hostname!=document.domain&&(tinymce.relaxedDomain=document.domain),!tinymce.relaxedDomain&&tinymce.EditorManager.baseURI.host!=e.hostname&&e.hostname&&(document.domain=tinymce.relaxedDomain=e.hostname.replace(/.*\.(.+\..+)$/,"$1")),t.onBeforeUnload=new tinymce.util.Dispatcher(t),i.add(window,"beforeunload",function(e){t.onBeforeUnload.dispatch(t,e)})},init:function(o){var e,s,r,a=this,t=tinymce.ScriptLoader,c=[];function l(e,t,n){var i=e[t];return i&&(tinymce.is(i,"string")&&(n=(n=i.replace(/\.\w+$/,""))?tinymce.resolve(n):0,i=tinymce.resolve(i)),i.apply(n||this,Array.prototype.slice.call(arguments,2)))}o=n({theme:"simple",language:"en",strict_loading_mode:"application/xhtml+xml"==document.contentType},o),a.settings=o,i.domLoaded||o.strict_loading_mode||(o.language&&t.add(tinymce.baseURL+"/langs/"+o.language+".js"),o.theme&&"-"!=o.theme.charAt(0)&&!m.urls[o.theme]&&m.load(o.theme,"themes/"+o.theme+"/editor_template"+tinymce.suffix+".js"),o.plugins&&(e=f(o.plugins),-1!=tinymce.inArray(e,"compat2x")&&h.load("compat2x","plugins/compat2x/editor_plugin"+tinymce.suffix+".js"),d(e,function(e){e&&"-"!=e.charAt(0)&&!h.urls[e]&&(!tinymce.isWebKit&&"safari"==e||h.load(e,"plugins/"+e+"/editor_plugin"+tinymce.suffix+".js"))})),t.loadQueue()),i.add(document,"init",function(){var t,n;if(l(o,"onpageload"),!o.browsers||(t=!1,d(f(o.browsers),function(e){switch(e){case"ie":case"msie":tinymce.isIE&&(t=!0);break;case"gecko":tinymce.isGecko&&(t=!0);break;case"safari":case"webkit":tinymce.isWebKit&&(t=!0);break;case"opera":tinymce.isOpera&&(t=!0)}}),t)){switch(o.mode){case"exact":0<(t=o.elements||"").length&&d(f(t),function(t){u.get(t)?(r=new tinymce.Editor(t,o),c.push(r),r.render(1)):d(document.forms,function(e){d(e.elements,function(e){e.name===t&&(t="mce_editor_0",u.setAttrib(e,"id",t),r=new tinymce.Editor(t,o),c.push(r),r.render(1))})})});break;case"textareas":case"specific_textareas":function i(e,t){return t.constructor===RegExp?t.test(e.className):u.hasClass(e,t)}d(u.select("textarea"),function(e){o.editor_deselector&&i(e,o.editor_deselector)||o.editor_selector&&!i(e,o.editor_selector)||(s=u.get(e.name),e.id||s||(e.id=e.name),e.id&&!a.get(e.id)||(e.id=u.uniqueId()),r=new tinymce.Editor(e.id,o),c.push(r),r.render(1))})}o.oninit&&(t=n=0,d(c,function(e){n++,e.initialized?t++:e.onInit.add(function(){++t==n&&l(o,"oninit")}),t==n&&l(o,"oninit")}))}})},get:function(e){return this.editors[e]},getInstanceById:function(e){return this.get(e)},add:function(e){return this.editors[e.id]=e,this._setActive(e),e},remove:function(e){var t=this;return t.editors[e.id]?(delete t.editors[e.id],t.activeEditor==e&&d(t.editors,function(e){return t._setActive(e),!1}),e.destroy(),e):null},execCommand:function(e,t,n){var i,o=this,s=o.get(n);switch(e){case"mceFocus":return s.focus(),!0;case"mceAddEditor":case"mceAddControl":return o.get(n)||new tinymce.Editor(n,o.settings).render(),!0;case"mceAddFrameControl":return(i=n.window).tinyMCE=tinyMCE,(i.tinymce=tinymce).DOM.doc=i.document,tinymce.DOM.win=i,(s=new tinymce.Editor(n.element_id,n)).render(),tinymce.isIE&&i.attachEvent("onunload",function e(){s.destroy(),i.detachEvent("onunload",e),i=i.tinyMCE=i.tinymce=null}),!(n.page_window=null);case"mceRemoveEditor":case"mceRemoveControl":return s&&s.remove(),!0;case"mceToggleEditor":return s?(s.isHidden()?s.show():s.hide(),!0):(o.execCommand("mceAddControl",0,n),!0)}return!!o.activeEditor&&o.activeEditor.execCommand(e,t,n)},execInstanceCommand:function(e,t,n,i){e=this.get(e);return!!e&&e.execCommand(t,n,i)},triggerSave:function(){d(this.editors,function(e){e.save()})},addI18n:function(n,e){var o=this.i18n;tinymce.is(n,"string")?d(e,function(e,t){o[n+"."+t]=e}):d(n,function(e,i){d(e,function(e,n){d(e,function(e,t){"common"===n?o[i+"."+t]=e:o[i+"."+n+"."+t]=e})})})},_setActive:function(e){this.selectedInstance=this.activeEditor=e}}),tinymce.EditorManager.preInit()}();var tinyMCE=window.tinyMCE=tinymce.EditorManager;!function(){var d=tinymce.DOM,u=tinymce.dom.Event,i=tinymce.extend,o=tinymce.util.Dispatcher,m=tinymce.each,h=tinymce.isGecko,l=tinymce.isIE,r=tinymce.isWebKit,a=tinymce.is,f=tinymce.ThemeManager,p=tinymce.PluginManager,g=tinymce.EditorManager,y=(tinymce.inArray,tinymce.grep,tinymce.explode);tinymce.create("tinymce.Editor",{Editor:function(e,t){var n=this;n.id=n.editorId=e,n.execCommands={},n.queryStateCommands={},n.queryValueCommands={},n.plugins={},m(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(e){n[e]=new o(n)}),n.settings=t=i({id:e,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:tinymce.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">',visual_table_class:"mceItemTable",visual:1,inline_styles:!0,convert_fonts_to_spans:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",valid_elements:"@[id|class|style|title|dir<ltr?rtl|lang|xml::lang|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],a[rel|rev|charset|hreflang|tabindex|accesskey|type|name|href|target|title|class|onfocus|onblur],strong/b,em/i,strike,u,#p[align],-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,-blockquote[cite],-table[border=0|cellspacing|cellpadding|width|frame|rules|height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,-div,-span,-code,-pre,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value],embed[type|width|height|src|*],script[src|type],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,fieldset,form[action|accept|accept-charset|enctype|method],input[accept|alt|checked|disabled|maxlength|name|readonly|size|src|type|value|tabindex|accesskey],kbd,label[for],legend,noscript,optgroup[label|disabled],option[disabled|label|selected|value],q[cite],samp,select[disabled|multiple|name|size],small,textarea[cols|rows|disabled|name|readonly],tt,var,big",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1},t),n.documentBaseURI=new tinymce.util.URI(t.document_base_url||tinymce.documentBaseURL,{base_uri:tinyMCE.baseURI}),n.baseURI=g.baseURI,n.execCallback("setup",n)},render:function(e){var t=this,n=t.settings,i=t.id,o=tinymce.ScriptLoader;function s(){n.language&&o.add(tinymce.baseURL+"/langs/"+n.language+".js"),"-"==n.theme.charAt(0)||f.urls[n.theme]||f.load(n.theme,"themes/"+n.theme+"/editor_template"+tinymce.suffix+".js"),m(y(n.plugins),function(e){e&&"-"!=e.charAt(0)&&!p.urls[e]&&(!r&&"safari"==e||p.load(e,"plugins/"+e+"/editor_plugin"+tinymce.suffix+".js"))}),o.loadQueue(function(){n.ask?u.add(t.id,"focus",function e(){window.setTimeout(function(){u.remove(t.id,"focus",e),t.windowManager.confirm(t.getLang("edit_confirm"),function(e){e&&t.init()})},0)}):t.removed||t.init()})}u.domLoaded?(e||(n.strict_loading_mode=1,tinyMCE.settings=n),t.getElement()&&(n.strict_loading_mode&&(o.settings.strict_mode=n.strict_loading_mode,tinymce.DOM.settings.strict=1),!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&n.hidden_input&&d.getParent(i,"form")&&d.insertAfter(d.create("input",{type:"hidden",name:i}),i),t.windowManager=new tinymce.WindowManager(t),"xml"==n.encoding&&t.onGetContent.add(function(e,t){t.save&&(t.content=d.encode(t.content))}),n.add_form_submit_trigger&&t.onSubmit.addToTop(function(){t.initialized&&(t.save(),t.isNotDirty=1)}),n.add_unload_trigger&&!n.ask&&(t._beforeUnload=tinyMCE.onBeforeUnload.add(function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0})})),tinymce.addUnload(t.destroy,t),n.submit_patch&&t.onBeforeRenderUI.add(function(){var e=t.getElement().form;e&&(e._mceOldSubmit||(e.submit.nodeType||e.submit.length||((t.formElement=e)._mceOldSubmit=e.submit,e.submit=function(){return g.triggerSave(),t.isNotDirty=1,this._mceOldSubmit(this)}),e=null))}),-1!=n.plugins.indexOf("compat2x")?(p.load("compat2x","plugins/compat2x/editor_plugin"+tinymce.suffix+".js"),o.loadQueue(s)):s())):u.add(document,"init",function(){t.render()})},init:function(){var e,t,n,i,o,s=this,r=s.settings,a=s.getElement();function c(e,t){t&&t.initial||s.execCommand("mceRepaint")}g.add(s),r.theme=r.theme.replace(/-/,""),t=f.get(r.theme),s.theme=new t,s.theme.init&&r.init_theme&&s.theme.init(s,f.urls[r.theme]||tinymce.documentBaseURL.replace(/\/$/,"")),m(y(r.plugins.replace(/\-/g,"")),function(e){var t=p.get(e),n=p.urls[e]||tinymce.documentBaseURL.replace(/\/$/,"");t&&(t=new t(s,n),(s.plugins[e]=t).init&&t.init(s,n))}),!1!==r.popup_css&&(r.popup_css?r.popup_css=s.documentBaseURI.toAbsolute(r.popup_css):r.popup_css=s.baseURI.toAbsolute("themes/"+r.theme+"/skins/"+r.skin+"/dialog.css")),r.popup_css_add&&(r.popup_css+=","+s.documentBaseURI.toAbsolute(r.popup_css_add)),s.controlManager=new tinymce.ControlManager(s),s.undoManager=new tinymce.UndoManager(s),s.undoManager.onAdd.add(function(e,t){if(!t.initial)return s.onChange.dispatch(s,t,e)}),s.undoManager.onUndo.add(function(e,t){return s.onUndo.dispatch(s,t,e)}),s.undoManager.onRedo.add(function(e,t){return s.onRedo.dispatch(s,t,e)}),r.custom_undo_redo&&s.onExecCommand.add(function(e,t,n,i,o){"Undo"==t||"Redo"==t||"mceRepaint"==t||o&&o.skip_undo||s.undoManager.add()}),s.onExecCommand.add(function(e,t){/^(FontName|FontSize)$/.test(t)||s.nodeChanged()}),h&&(s.onUndo.add(c),s.onRedo.add(c),s.onSetContent.add(c)),s.onBeforeRenderUI.dispatch(s,s.controlManager),r.render_ui&&(i=r.width||a.style.width||a.offsetWidth,e=r.height||a.style.height||a.offsetHeight,s.orgDisplay=a.style.display,(o=/^[0-9\.]+(|px)$/i).test(""+i)&&(i=Math.max(parseInt(i)+(t.deltaWidth||0),100)),o.test(""+e)&&(e=Math.max(parseInt(e)+(t.deltaHeight||0),100)),t=s.theme.renderUI({targetNode:a,width:i,height:e,deltaWidth:r.delta_width,deltaHeight:r.delta_height}),s.editorContainer=t.editorContainer),d.setStyles(t.sizeContainer||t.editorContainer,{width:i,height:e}),(e=(t.iframeHeight||e)+("number"==typeof e?t.deltaHeight||0:""))<100&&(e=100),s.iframeHTML=r.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml"><base href="'+s.documentBaseURI.getURI()+'" />',s.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',tinymce.relaxedDomain&&(s.iframeHTML+='<script type="text/javascript">document.domain = "'+tinymce.relaxedDomain+'";<\/script>'),-1!=(i=r.body_id||"tinymce").indexOf("=")&&(i=(i=s.getParam("body_id","","hash"))[s.id]||i),-1!=(r=r.body_class||"").indexOf("=")&&(r=(r=s.getParam("body_class","","hash"))[s.id]||""),s.iframeHTML+='</head><body id="'+i+'" class="mceContentBody '+r+'"></body></html>',tinymce.relaxedDomain&&(l||tinymce.isOpera&&9.5<=parseFloat(opera.version())?n='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+s.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()':tinymce.isOpera&&(n='javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();ed.setupIframe();})()')),e=d.add(t.iframeContainer,"iframe",{id:s.id+"_ifr",src:n||'javascript:""',frameBorder:"0",style:{width:"100%",height:e}}),s.contentAreaContainer=t.iframeContainer,d.get(t.editorContainer).style.display=s.orgDisplay,d.get(s.id).style.display="none",tinymce.isOldWebKit?(u.add(e,"load",s.setupIframe,s),e.src=tinymce.baseURL+"/plugins/safari/blank.htm"):(l&&tinymce.relaxedDomain||s.setupIframe(),a=e=t=null)},setupIframe:function(){var e,i=this,t=i.settings,n=(d.get(i.id),i.getDoc());if(l&&tinymce.relaxedDomain||(n.open(),n.write(i.iframeHTML),n.close()),!l)try{t.readonly||(n.designMode="On")}catch(e){}function o(e,n){m(y(t.custom_elements),function(e){var t=0===e.indexOf("~")?(e=e.substring(1),"span"):"div";n.content=n.content.replace(new RegExp("<("+e+")([^>]*)>","g"),"<"+t+' mce_name="$1"$2>'),n.content=n.content.replace(new RegExp("</("+e+")>","g"),"</"+t+">")})}if(l&&(e=i.getBody(),d.hide(e),t.readonly||(e.contentEditable=!0),d.show(e)),i.dom=new tinymce.DOM.DOMUtils(i.getDoc(),{keep_values:!0,url_converter:i.convertURL,url_converter_scope:i,hex_colors:t.force_hex_style_colors,class_filter:t.class_filter,update_styles:1,fix_ie_paragraphs:1}),i.serializer=new tinymce.dom.Serializer({entity_encoding:t.entity_encoding,entities:t.entities,valid_elements:!1===t.verify_html?"*[*]":t.valid_elements,extended_valid_elements:t.extended_valid_elements,valid_child_elements:t.valid_child_elements,invalid_elements:t.invalid_elements,fix_table_elements:t.fix_table_elements,fix_list_elements:t.fix_list_elements,fix_content_duplication:t.fix_content_duplication,convert_fonts_to_spans:t.convert_fonts_to_spans,font_size_classes:t.font_size_classes,font_size_style_values:t.font_size_style_values,apply_source_formatting:t.apply_source_formatting,remove_linebreaks:t.remove_linebreaks,element_format:t.element_format,dom:i.dom}),i.selection=new tinymce.dom.Selection(i.dom,i.getWin(),i.serializer),i.forceBlocks=new tinymce.ForceBlocks(i,{forced_root_block:t.forced_root_block}),i.editorCommands=new tinymce.EditorCommands(i),i.serializer.onPreProcess.add(function(e,t){return i.onPreProcess.dispatch(i,t,e)}),i.serializer.onPostProcess.add(function(e,t){return i.onPostProcess.dispatch(i,t,e)}),i.onPreInit.dispatch(i),t.gecko_spellcheck||(i.getBody().spellcheck=0),t.readonly||i._addEvents(),i.controlManager.onPostRender.dispatch(i,i.controlManager),i.onPostRender.dispatch(i),t.directionality&&(i.getBody().dir=t.directionality),t.nowrap&&(i.getBody().style.whiteSpace="nowrap"),t.auto_resize&&i.onNodeChange.add(i.resizeToContent,i),t.custom_elements&&(i.onBeforeSetContent.add(o),i.onPostProcess.add(function(e,t){t.set&&o(0,t)})),t.handle_node_change_callback&&i.onNodeChange.add(function(e,t,n){i.execCallback("handle_node_change_callback",i.id,n,-1,-1,!0,i.selection.isCollapsed())}),t.save_callback&&i.onSaveContent.add(function(e,t){var n=i.execCallback("save_callback",i.id,t.content,i.getBody());n&&(t.content=n)}),t.onchange_callback&&i.onChange.add(function(e,t){i.execCallback("onchange_callback",i,t)}),t.convert_newlines_to_brs&&i.onBeforeSetContent.add(function(e,t){t.initial&&(t.content=t.content.replace(/\r?\n/g,"<br />"))}),t.fix_nesting&&l&&i.onBeforeSetContent.add(function(e,t){t.content=i._fixNesting(t.content)}),t.preformatted&&i.onPostProcess.add(function(e,t){t.content=t.content.replace(/^\s*<pre.*?>/,""),t.content=t.content.replace(/<\/pre>\s*$/,""),t.set&&(t.content='<pre class="mceItemHidden">'+t.content+"</pre>")}),t.verify_css_classes&&(i.serializer.attribValueFilter=function(e,t){var n;return"class"==e?(i.classesRE||0<(e=i.dom.getClasses()).length&&(n="",m(e,function(e){n+=(n?"|":"")+e.class}),i.classesRE=new RegExp("("+n+")","gi")),!i.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(t)||i.classesRE.test(t)?t:""):t}),t.convert_fonts_to_spans&&i._convertFonts(),t.inline_styles&&i._convertInlineElements(),t.cleanup_callback&&(i.onBeforeSetContent.add(function(e,t){t.content=i.execCallback("cleanup_callback","insert_to_editor",t.content,t)}),i.onPreProcess.add(function(e,t){t.set&&i.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t),t.get&&i.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)}),i.onPostProcess.add(function(e,t){t.set&&(t.content=i.execCallback("cleanup_callback","insert_to_editor",t.content,t)),t.get&&(t.content=i.execCallback("cleanup_callback","get_from_editor",t.content,t))})),t.save_callback&&i.onGetContent.add(function(e,t){t.save&&(t.content=i.execCallback("save_callback",i.id,t.content,i.getBody()))}),t.handle_event_callback&&i.onEvent.add(function(e,t,n){!1===i.execCallback("handle_event_callback",t,e,n)&&u.cancel(t)}),i.onSetContent.add(function(){i.addVisual(i.getBody())}),t.padd_empty_editor&&i.onPostProcess.add(function(e,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),h&&!t.readonly)try{n.designMode="Off",n.designMode="On"}catch(e){}setTimeout(function(){i.removed||(i.load({initial:!0,format:t.cleanup_on_startup?"html":"raw"}),i.startContent=i.getContent({format:"raw"}),i.undoManager.add({initial:!0}),i.initialized=!0,i.onInit.dispatch(i),i.execCallback("setupcontent_callback",i.id,i.getBody(),i.getDoc()),i.execCallback("init_instance_callback",i),i.focus(!0),i.nodeChanged({initial:1}),t.content_css&&tinymce.each(y(t.content_css),function(e){i.dom.loadCSS(i.documentBaseURI.toAbsolute(e))}),t.auto_focus&&setTimeout(function(){var e=g.get(t.auto_focus);e.selection.select(e.getBody(),1),e.selection.collapse(1),e.getWin().focus()},100))},1)},focus:function(e){var t=this,n=t.settings.content_editable;e||n||l&&t.selection.getNode().ownerDocument==t.getDoc()||t.getWin().focus(),g.activeEditor!=t&&(null!=(n=g.activeEditor)&&n.onDeactivate.dispatch(n,t),t.onActivate.dispatch(t,n)),g._setActive(t)},execCallback:function(e){var t,n=this,i=n.settings[e];if(i)return n.callbackLookup&&(t=n.callbackLookup[e])&&(i=t.func,t=t.scope),a(i,"string")&&(t=(t=i.replace(/\.\w+$/,""))?tinymce.resolve(t):0,i=tinymce.resolve(i),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[e]={func:i,scope:t}),i.apply(t||n,Array.prototype.slice.call(arguments,1))},translate:function(e){var n=this.settings.language||"en",i=g.i18n;return e?i[n+"."+e]||e.replace(/{\#([^}]+)\}/g,function(e,t){return i[n+"."+t]||"{#"+t+"}"}):""},getLang:function(e,t){return g.i18n[(this.settings.language||"en")+"."+e]||(a(t)?t:"{#"+e+"}")},getParam:function(e,t,n){var i,o=tinymce.trim,t=a(this.settings[e])?this.settings[e]:t;return"hash"===n?(i={},a(t,"string")?m(0<t.indexOf("=")?t.split(/[;,](?![^=;,]*(?:[;,]|$))/):t.split(","),function(e){1<(e=e.split("=")).length?i[o(e[0])]=o(e[1]):i[o(e[0])]=o(e)}):i=t,i):t},nodeChanged:function(e){var t=this,n=t.selection,i=n.getNode()||t.getBody();t.initialized&&t.onNodeChange.dispatch(t,e&&e.controlManager||t.controlManager,l&&i.ownerDocument!=t.getDoc()?t.getBody():i,n.isCollapsed(),e)},addButton:function(e,t){this.buttons=this.buttons||{},this.buttons[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,n,i,o){var t,s=this;return!!s.settings.custom_shortcuts&&(s.shortcuts=s.shortcuts||{},a(i,"string")&&(t=i,i=function(){s.execCommand(t,!1,null)}),a(i,"object")&&(t=i,i=function(){s.execCommand(t[0],t[1],t[2])}),m(y(e),function(e){var t={func:i,scope:o||this,desc:n,alt:!1,ctrl:!1,shift:!1};m(y(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":t[e]=!0;break;default:t.charCode=e.charCodeAt(0),t.keyCode=e.toUpperCase().charCodeAt(0)}}),s.shortcuts[(t.ctrl?"ctrl":"")+","+(t.alt?"alt":"")+","+(t.shift?"shift":"")+","+t.keyCode]=t}),!0)},execCommand:function(t,n,i,o){var e,s,r=this,a=0;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(t)||o&&o.skip_focus||r.focus(),e={},r.onBeforeExecCommand.dispatch(r,t,n,i,e),!e.terminate&&(r.execCallback("execcommand_callback",r.id,r.selection.getNode(),t,n,i)?(r.onExecCommand.dispatch(r,t,n,i,o),!0):(e=r.execCommands[t])&&!0!==(s=e.func.call(e.scope,n,i))?(r.onExecCommand.dispatch(r,t,n,i,o),s):(m(r.plugins,function(e){if(e.execCommand&&e.execCommand(t,n,i))return r.onExecCommand.dispatch(r,t,n,i,o),!(a=1)}),!!a||(r.theme.execCommand&&r.theme.execCommand(t,n,i)||r.editorCommands.execCommand(t,n,i)?(r.onExecCommand.dispatch(r,t,n,i,o),!0):(r.getDoc().execCommand(t,n,i),void r.onExecCommand.dispatch(r,t,n,i,o)))))},queryCommandState:function(e){var t,n;if(!this._isHidden()){if((t=this.queryStateCommands[e])&&!0!==(n=t.func.call(t.scope)))return n;if(-1!==(t=this.editorCommands.queryCommandState(e)))return t;try{return this.getDoc().queryCommandState(e)}catch(e){}}},queryCommandValue:function(e){var t,n;if(!this._isHidden()){if((t=this.queryValueCommands[e])&&!0!==(n=t.func.call(t.scope)))return n;if(t=this.editorCommands.queryCommandValue(e),a(t))return t;try{return this.getDoc().queryCommandValue(e)}catch(e){}}},show:function(){d.show(this.getContainer()),d.hide(this.id),this.load()},hide:function(){var e=this,t=e.getDoc();l&&t&&t.execCommand("SelectAll"),e.save(),d.hide(e.getContainer()),d.setStyle(e.id,"display",e.orgDisplay)},isHidden:function(){return!d.isHidden(this.id)},setProgressState:function(e,t,n){return this.onSetProgressState.dispatch(this,e,t,n),e},resizeToContent:function(){d.setStyle(this.id+"_ifr","height",this.getBody().scrollHeight)},load:function(e){var t,n=this.getElement();if(n)return(e=e||{}).load=!0,t=this.setContent(a(n.value)?n.value:n.innerHTML,e),e.element=n,e.no_events||this.onLoadContent.dispatch(this,e),e.element=n=null,t},save:function(e){var t,n,i=this,o=i.getElement();if(o&&i.initialized)return(e=e||{}).save=!0,e.no_events||(i.undoManager.typing=0,i.undoManager.add()),e.element=o,e.content=i.getContent(e),e.no_events||i.onSaveContent.dispatch(i,e),t=e.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=t:(o.innerHTML=t,(n=d.getParent(i.id,"form"))&&m(n.elements,function(e){if(e.name==i.id)return e.value=t,!1})),e.element=o=null,t},setContent:function(e,t){var n=this;return(t=t||{}).format=t.format||"html",t.set=!0,t.content=e,t.no_events||n.onBeforeSetContent.dispatch(n,t),tinymce.isIE||0!==e.length&&!/^\s+$/.test(e)||(t.content=n.dom.setHTML(n.getBody(),'<br mce_bogus="1" />'),t.format="raw"),t.content=n.dom.setHTML(n.getBody(),tinymce.trim(t.content)),"raw"!=t.format&&n.settings.cleanup&&(t.getInner=!0,t.content=n.dom.setHTML(n.getBody(),n.serializer.serialize(n.getBody(),t))),t.no_events||n.onSetContent.dispatch(n,t),t.content},getContent:function(e){var t,n=this;return(e=e||{}).format=e.format||"html",e.get=!0,e.no_events||n.onBeforeGetContent.dispatch(n,e),t=(t="raw"!=e.format&&n.settings.cleanup?(e.getInner=!0,n.serializer.serialize(n.getBody(),e)):n.getBody().innerHTML).replace(/^\s*|\s*$/g,""),e.content=t,e.no_events||n.onGetContent.dispatch(n,e),e.content},isDirty:function(){return tinymce.trim(this.startContent)!=tinymce.trim(this.getContent({format:"raw",no_events:1}))&&!this.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=d.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return d.get(this.settings.content_element||this.id)},getWin:function(){var e;return this.contentWindow||(e=d.get(this.id+"_ifr"))&&(this.contentWindow=e.contentWindow),this.contentWindow},getDoc:function(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var i=this.settings;return i.urlconverter_callback?this.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")?e:i.relative_urls?this.documentBaseURI.toRelative(e):e=this.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var n=this,i=n.settings;e=e||n.getBody(),a(n.hasVisual)||(n.hasVisual=i.visual),m(n.dom.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":return void((t=n.dom.getAttrib(e,"border"))&&"0"!=t||(n.hasVisual?n.dom.addClass(e,i.visual_table_class):n.dom.removeClass(e,i.visual_table_class)));case"A":return void((t=n.dom.getAttrib(e,"name"))&&(n.hasVisual?n.dom.addClass(e,"mceItemAnchor"):n.dom.removeClass(e,"mceItemAnchor")))}}),n.onVisualAid.dispatch(n,e,n.hasVisual)},remove:function(){var e=this,t=e.getContainer();e.removed=1,e.hide(),e.execCallback("remove_instance_callback",e),e.onRemove.dispatch(e),e.onExecCommand.listeners=[],g.remove(e),d.remove(t)},destroy:function(e){var t=this;t.destroyed||(e||(tinymce.removeUnload(t.destroy),tinyMCE.onBeforeUnload.remove(t._beforeUnload),t.theme.destroy&&t.theme.destroy(),t.controlManager.destroy(),t.selection.destroy(),t.dom.destroy(),t.settings.content_editable||(u.clear(t.getWin()),u.clear(t.getDoc())),u.clear(t.getBody()),u.clear(t.formElement)),t.formElement&&(t.formElement.submit=t.formElement._mceOldSubmit,t.formElement._mceOldSubmit=null),t.contentAreaContainer=t.formElement=t.container=t.settings.content_element=t.bodyElement=t.contentDocument=t.contentWindow=null,t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null),t.destroyed=1)},_addEvents:function(){var e,i=this,n=i.settings,o={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};function s(e,t){e.type;i.removed||!1!==i.onEvent.dispatch(i,e,t)&&i[o[e.fakeType||e.type]].dispatch(i,e,t)}function t(){var t=this.getDoc(),e=this.settings;if(h&&!e.readonly){if(this._isHidden())try{e.content_editable||(t.designMode="On")}catch(e){}try{t.execCommand("styleWithCSS",0,!1)}catch(e){if(!this._isHidden())try{t.execCommand("useCSS",0,!0)}catch(e){}}if(!e.table_inline_editing)try{t.execCommand("enableInlineTableEditing",!1,!1)}catch(e){}if(!e.object_resizing)try{t.execCommand("enableObjectResizing",!1,!1)}catch(e){}}}function r(e,t){if(9===t.keyCode)return u.cancel(t)}function a(n,e){var i,t,o,s,r;function a(e){if(o=d.getParent(n.id,"form"),s=o.elements,o)if(m(s,function(e,t){if(e.id==n.id)return i=t,!1}),0<e){for(t=i+1;t<s.length;t++)if("hidden"!=s[t].type)return s[t]}else for(t=i-1;0<=t;t--)if("hidden"!=s[t].type)return s[t];return null}if(9===e.keyCode&&(1==(r=y(n.getParam("tab_focus"))).length&&(r[1]=r[0],r[0]=":prev"),s=e.shiftKey?":prev"==r[0]?a(-1):d.get(r[0]):":next"==r[1]?a(1):d.get(r[1])))return(n=g.get(s.id||s.name))?n.focus():window.setTimeout(function(){window.focus(),s.focus()},10),u.cancel(e)}if(m(o,function(e,t){switch(t){case"contextmenu":tinymce.isOpera?u.add(i.getBody(),"mousedown",function(e){e.ctrlKey&&(e.fakeType="contextmenu",s(e))}):u.add(i.getBody(),t,s);break;case"paste":u.add(i.getBody(),t,function(e){var t;e.clipboardData?t=e.clipboardData.getData("text/plain"):tinymce.isIE&&(t=i.getWin().clipboardData.getData("Text")),s(e,{text:t,html:void 0})});break;case"submit":case"reset":u.add(i.getElement().form||d.getParent(i.id,"form"),t,s);break;default:u.add(n.content_editable?i.getBody():i.getDoc(),t,s)}}),u.add(n.content_editable?i.getBody():h?i.getDoc():i.getWin(),"focus",function(e){i.focus(!0)}),tinymce.isGecko&&u.add(i.getDoc(),"DOMNodeInserted",function(e){var t;1===(e=e.target).nodeType&&"IMG"===e.nodeName&&(t=e.getAttribute("mce_src"))&&(e.src=i.documentBaseURI.toAbsolute(t))}),h&&(i.onBeforeExecCommand.add(t),i.onMouseDown.add(t)),i.onMouseUp.add(i.nodeChanged),i.onClick.add(i.nodeChanged),i.onKeyUp.add(function(e,t){var n=t.keyCode;(33<=n&&n<=36||37<=n&&n<=40||13==n||45==n||46==n||8==n||tinymce.isMac&&(91==n||93==n)||t.ctrlKey)&&i.nodeChanged()}),i.onReset.add(function(){i.setContent(i.startContent,{format:"raw"})}),i.getParam("tab_focus")&&(i.onKeyUp.add(r),h?(i.onKeyPress.add(a),i.onKeyDown.add(r)):i.onKeyDown.add(a)),n.custom_shortcuts){for(n.custom_undo_redo_keyboard_shortcuts&&(i.addShortcut("ctrl+z",i.getLang("undo_desc"),"Undo"),i.addShortcut("ctrl+y",i.getLang("redo_desc"),"Redo")),h&&(i.addShortcut("ctrl+b",i.getLang("bold_desc"),"Bold"),i.addShortcut("ctrl+i",i.getLang("italic_desc"),"Italic"),i.addShortcut("ctrl+u",i.getLang("underline_desc"),"Underline")),e=1;e<=6;e++)i.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"<h"+e+">"]);function c(t){var n=null;return(t.altKey||t.ctrlKey||t.metaKey)&&m(i.shortcuts,function(e){if((!tinymce.isMac||e.ctrl==t.metaKey)&&(tinymce.isMac||e.ctrl==t.ctrlKey)&&e.alt==t.altKey&&e.shift==t.shiftKey)return t.keyCode==e.keyCode||t.charCode&&t.charCode==e.charCode?(n=e,!1):void 0}),n}i.addShortcut("ctrl+7","",["FormatBlock",!1,"<p>"]),i.addShortcut("ctrl+8","",["FormatBlock",!1,"<div>"]),i.addShortcut("ctrl+9","",["FormatBlock",!1,"<address>"]),i.onKeyUp.add(function(e,t){if(c(t))return u.cancel(t)}),i.onKeyPress.add(function(e,t){if(c(t))return u.cancel(t)}),i.onKeyDown.add(function(e,t){var n=c(t);if(n)return n.func.call(n.scope),u.cancel(t)})}function l(){i.undoManager.typing=0,i.undoManager.add()}tinymce.isIE&&(u.add(i.getDoc(),"controlselect",function(e){var t,n=i.resizeInfo;"IMG"===(e=e.target).nodeName&&(n&&u.remove(n.node,n.ev,n.cb),t=i.dom.hasClass(e,"mceItemNoResize")?(ev="resizestart",u.add(e,"resizestart",u.cancel,u)):(ev="resizeend",u.add(e,ev,function(e){var t;e=e.target,(t=i.dom.getStyle(e,"width"))&&(i.dom.setAttrib(e,"width",t.replace(/[^0-9%]+/g,"")),i.dom.setStyle(e,"width","")),(t=i.dom.getStyle(e,"height"))&&(i.dom.setAttrib(e,"height",t.replace(/[^0-9%]+/g,"")),i.dom.setStyle(e,"height",""))})),n=i.resizeInfo={node:e,ev:ev,cb:t})}),i.onKeyDown.add(function(e,t){if(8===t.keyCode)if(i.selection.getRng().item)return i.selection.getRng().item(0).removeNode(),u.cancel(t)})),tinymce.isOpera&&i.onClick.add(function(e,t){u.prevent(t)}),n.custom_undo_redo&&(tinymce.isIE?u.add(i.getWin(),"blur",function(e){var t;i.selection&&(t=i.selection.getNode(),!i.removed&&t.ownerDocument&&t.ownerDocument!=i.getDoc()&&l())}):u.add(i.getDoc(),"blur",function(){i.selection&&!i.removed&&l()}),i.onMouseDown.add(l),i.onKeyUp.add(function(e,t){(33<=t.keyCode&&t.keyCode<=36||37<=t.keyCode&&t.keyCode<=40||13==t.keyCode||45==t.keyCode||t.ctrlKey)&&(i.undoManager.typing=0,i.undoManager.add())}),i.onKeyDown.add(function(e,t){33<=t.keyCode&&t.keyCode<=36||37<=t.keyCode&&t.keyCode<=40||13==t.keyCode||45==t.keyCode?i.undoManager.typing&&(i.undoManager.add(),i.undoManager.typing=0):i.undoManager.typing||(i.undoManager.add(),i.undoManager.typing=1)}))},_convertInlineElements:function(){var n,i,o=this,s=o.settings,r=o.dom;function a(e,t){s.inline_styles&&(t.get?m(o.dom.select("table,u,strike",t.node),function(e){switch(e.nodeName){case"TABLE":(n=r.getAttrib(e,"height"))&&(r.setStyle(e,"height",n),r.setAttrib(e,"height",""));break;case"U":case"STRIKE":e.style.textDecoration="U"==e.nodeName?"underline":"line-through",r.setAttrib(e,"mce_style",""),r.setAttrib(e,"mce_name","span")}}):t.set&&m(o.dom.select("table,span",t.node).reverse(),function(e){"TABLE"==e.nodeName?(n=r.getStyle(e,"height"))&&r.setAttrib(e,"height",n.replace(/[^0-9%]+/g,"")):(i="underline"==e.style.textDecoration?"u":"line-through"==e.style.textDecoration?"strike":"")&&(e.style.textDecoration="",r.setAttrib(e,"mce_style",""),i=r.create(i,{style:r.getAttrib(e,"style")}),r.replace(i,e,1))}))}o.onPreProcess.add(a),s.cleanup_on_startup||o.onSetContent.add(function(e,t){t.initial&&a(0,{node:o.getBody(),set:1})})},_convertFonts:function(){var s,r,a=this,c=a.settings,l=a.dom;function n(e){var t,n,i,o;if(c.inline_styles)for(o=(i=a.dom.select("font",e)).length-1;0<=o;o--)t=i[o],n=l.create("span",{style:l.getAttrib(t,"style"),class:l.getAttrib(t,"class")}),l.setStyles(n,{fontFamily:l.getAttrib(t,"face"),color:l.getAttrib(t,"color"),backgroundColor:t.style.backgroundColor}),t.size&&(s?l.setStyle(n,"fontSize",s[parseInt(t.size)-1]):l.setAttrib(n,"class",r[parseInt(t.size)-1])),l.setAttrib(n,"mce_style",""),l.replace(n,t,1)}c.inline_styles&&((s=c.font_size_style_values)&&(s=y(s)),(r=c.font_size_classes)&&(r=y(r)),a.onPreProcess.add(function(e,t){t.get&&n(t.node)}),a.onSetContent.add(function(e,t){t.initial&&n(t.node)}))},_isHidden:function(){var e;return h?!(e=this.selection.getSel())||!e.rangeCount||0==e.rangeCount:0},_fixNesting:function(e){var i,o=[];for(e=e.replace(/<(\/)?([^\s>]+)[^>]*?>/g,function(e,t,n){if("/"===t){if(!o.length)return"";if(n!==o[o.length-1].tag){for(i=o.length-1;0<=i;i--)if(o[i].tag===n){o[i].close=1;break}return""}o.pop(),o.length&&o[o.length-1].close&&(e=e+"</"+o[o.length-1].tag+">",o.pop())}else{if(/^(br|hr|input|meta|img|link|param)$/i.test(n))return e;if(/\/>$/.test(e))return e;o.push({tag:n})}return e}),i=o.length-1;0<=i;i--)e+="</"+o[i].tag+">";return e}})}(),function(){var f=tinymce.each,p=tinymce.isIE,s=tinymce.isGecko,r=tinymce.isOpera,u=tinymce.isWebKit;function g(e){return/^(H[1-6]|HR|P|DIV|ADDRESS|PRE|FORM|TABLE|OL|UL|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP)$/.test(e.nodeName)}tinymce.create("tinymce.EditorCommands",{EditorCommands:function(e){this.editor=e},execCommand:function(e,t,n){var i,o=this.editor;switch(e){case"Cut":case"Copy":case"Paste":try{o.getDoc().execCommand(e,t,n)}catch(e){s?o.windowManager.confirm(o.getLang("clipboard_msg"),function(e){e&&window.open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","mceExternal")}):o.windowManager.alert(o.getLang("clipboard_no_support"))}return!0;case"mceResetDesignMode":case"mceBeginUndoLevel":return!0;case"unlink":return this.UnLink(),!0;case"JustifyLeft":case"JustifyCenter":case"JustifyRight":case"JustifyFull":return this.mceJustify(e,e.substring(7).toLowerCase()),!0;case"mceEndUndoLevel":case"mceAddUndoLevel":return o.undoManager.add(),!0;default:if(i=this[e])return i.call(this,t,n),!0}return!1},Indent:function(){var e=this.editor,t=e.dom,n=e.selection,i=e.settings.indentation,o=/[a-z%]+$/i.exec(i);i=parseInt(i),!e.settings.inline_styles||this.queryStateInsertUnorderedList()||this.queryStateInsertOrderedList()?(e.getDoc().execCommand("Indent",!1,null),p&&t.getParent(n.getNode(),function(e){"BLOCKQUOTE"==e.nodeName&&(e.dir=e.style.cssText="")})):f(this._getSelectedBlocks(),function(e){t.setStyle(e,"paddingLeft",parseInt(e.style.paddingLeft||0)+i+o)})},Outdent:function(){var t,e=this.editor,n=e.dom,i=(e.selection,e.settings.indentation),o=/[a-z%]+$/i.exec(i);i=parseInt(i),!e.settings.inline_styles||this.queryStateInsertUnorderedList()||this.queryStateInsertOrderedList()?e.getDoc().execCommand("Outdent",!1,null):f(this._getSelectedBlocks(),function(e){t=Math.max(0,parseInt(e.style.paddingLeft||0)-i),n.setStyle(e,"paddingLeft",t?t+o:"")})},mceSetAttribute:function(e,t){var n=this.editor,i=n.dom;(n=i.getParent(n.selection.getNode(),i.isBlock))&&i.setAttrib(n,t.name,t.value)},mceSetContent:function(e,t){this.editor.setContent(t)},mceToggleVisualAid:function(){var e=this.editor;e.hasVisual=!e.hasVisual,e.addVisual()},mceReplaceContent:function(e,t){var n=this.editor.selection;n.setContent(t.replace(/\{\$selection\}/g,n.getContent({format:"text"})))},mceInsertLink:function(e,t){var i=this.editor,n=i.selection,n=i.dom.getParent(n.getNode(),"A");function o(n){f(t,function(e,t){i.dom.setAttrib(n,t,e)})}tinymce.is(t,"string")&&(t={href:t}),n?t.href?o(n):i.dom.remove(n,1):(i.execCommand("CreateLink",!1,"javascript:mctmp(0);"),f(i.dom.select("a"),function(e){"javascript:mctmp(0);"==e.href&&o(e)}))},UnLink:function(){var e=this.editor,t=e.selection;t.isCollapsed()&&t.select(t.getNode()),e.getDoc().execCommand("unlink",!1,null),t.collapse(0)},FontName:function(e,t){var n=this.editor,i=n.selection;t?n.settings.convert_fonts_to_spans?this._applyInlineStyle("span",{style:{fontFamily:t}}):n.getDoc().execCommand("FontName",!1,t):(i.isCollapsed()&&i.select(i.getNode()),this.RemoveFormat())},FontSize:function(e,t){var n,i=this.editor,o=i.settings;o.convert_fonts_to_spans&&1<=t&&t<=7&&(n=tinymce.explode(o.font_size_style_values),t=(o=tinymce.explode(o.font_size_classes))?o[t-1]||t:n[t-1]||t),1<=t&&t<=7?i.getDoc().execCommand("FontSize",!1,t):this._applyInlineStyle("span",{style:{fontSize:t}})},queryCommandValue:function(e){var t=this["queryValue"+e];return!!t&&t.call(this,e)},queryCommandState:function(e){var t;switch(e){case"JustifyLeft":case"JustifyCenter":case"JustifyRight":case"JustifyFull":return this.queryStateJustify(e,e.substring(7).toLowerCase());default:if(t=this["queryState"+e])return t.call(this,e)}return-1},_queryState:function(e){try{return this.editor.getDoc().queryCommandState(e)}catch(e){}},_queryVal:function(e){try{return this.editor.getDoc().queryCommandValue(e)}catch(e){}},queryValueFontSize:function(){var e,t=this.editor,n=0;return(n=(e=t.dom.getParent(t.selection.getNode(),"SPAN"))?e.style.fontSize:n)||!r&&!u?n||this._queryVal("FontSize"):n=(e=t.dom.getParent(t.selection.getNode(),"FONT"))?e.size:n},queryValueFontName:function(){var e,t=this.editor,n=0;return(e=t.dom.getParent(t.selection.getNode(),"FONT"))&&(n=e.face),n=(n=(e=t.dom.getParent(t.selection.getNode(),"SPAN"))?e.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase():n)||this._queryVal("FontName")},mceJustify:function(e,t){var n,i,o=this.editor,s=o.selection,r=s.getNode(),a=r.nodeName,c=o.dom;return o.settings.inline_styles&&this.queryStateJustify(e,t)&&(i=1),n=c.getParent(r,o.dom.isBlock),"IMG"==a?"full"==t?void 0:(i?("center"==t&&c.setStyle(n||r.parentNode,"textAlign",""),c.setStyle(r,"float","")):"center"==t?((!(n=n&&/^(TD|TH)$/.test(n.nodeName)?0:n)||1<n.childNodes.length)&&((a=c.create("p")).appendChild(r.cloneNode(!1)),n?c.insertAfter(a,n):c.insertAfter(a,r),c.remove(r),r=a.firstChild,n=a),c.setStyle(n,"textAlign",t),c.setStyle(r,"float","")):(c.setStyle(r,"float",t),c.setStyle(n||r.parentNode,"textAlign","")),void this.mceRepaint()):o.settings.inline_styles&&o.settings.forced_root_block?(i&&(t=""),void f(this._getSelectedBlocks(c.getParent(s.getStart(),c.isBlock),c.getParent(s.getEnd(),c.isBlock)),function(e){c.setAttrib(e,"align",""),c.setStyle(e,"textAlign","full"==t?"justify":t)})):(i||o.getDoc().execCommand(e,!1,null),void(o.settings.inline_styles&&(i?c.getParent(o.selection.getNode(),function(e){e.style&&e.style.textAlign&&c.setStyle(e,"textAlign","")}):f(c.select("*"),function(e){var t=e.align;t&&("full"==t&&(t="justify"),c.setStyle(e,"textAlign",t),c.setAttrib(e,"align",""))}))))},mceSetCSSClass:function(e,t){this.mceSetStyleInfo(0,{command:"setattrib",name:"class",value:t})},getSelectedElement:function(){var e,t,n,i,o,s,r,a=this.editor,c=a.dom,l=a.selection,d=l.getRng();if(l.isCollapsed()||d.item)return l.getNode();if(a=a.settings.merge_styles_invalid_parents,tinymce.is(a,"string")&&(a=new RegExp(a,"i")),p){if(i=d.duplicate(),i.collapse(!0),e=i.parentElement(),n=d.duplicate(),n.collapse(!1),t=n.parentElement(),e!=t&&(i.move("character",1),e=i.parentElement()),e==t&&((i=d.duplicate()).moveToElementText(e),0==i.compareEndPoints("StartToStart",d)&&0==i.compareEndPoints("EndToEnd",d)))return a&&a.test(e.nodeName)?null:e}else{function u(e){return c.getParent(e,function(e){return 1==e.nodeType})}if(e=d.startContainer,t=d.endContainer,n=d.startOffset,i=d.endOffset,!d.collapsed&&e==t&&n-i<2&&e.hasChildNodes())return s=e.childNodes[n],a&&a.test(s.nodeName)?null:s;if(3!=e.nodeType||3!=t.nodeType)return null;if(0==n&&(s=u(e))&&s.firstChild!=e&&(s=null),n==e.nodeValue.length&&(o=e.nextSibling)&&1==o.nodeType&&(s=e.nextSibling),0==i&&(o=t.previousSibling)&&1==o.nodeType&&(r=o),s==(r=i==t.nodeValue.length&&(r=u(t))&&r.lastChild!=t?null:r))return a&&s&&a.test(s.nodeName)?null:s}return null},InsertHorizontalRule:function(){s||p?this.editor.selection.setContent("<hr />"):this.editor.getDoc().execCommand("InsertHorizontalRule",!1,"")},RemoveFormat:function(){var e=this.editor,t=e.selection;u?t.setContent(t.getContent({format:"raw"}).replace(/(<(span|b|i|strong|em|strike) [^>]+>|<(span|b|i|strong|em|strike)>|<\/(span|b|i|strong|em|strike)>|)/g,""),{format:"raw"}):e.getDoc().execCommand("RemoveFormat",!1,null),this.mceSetStyleInfo(0,{command:"removeformat"}),e.addVisual()},mceSetStyleInfo:function(e,t){var n,i,o=this.editor,s=o.getDoc(),r=o.dom,a=o.selection,c=t.wrapper||"span",l=a.getBookmark();function d(e){if(1==e.nodeType)switch(t.command){case"setattrib":return r.setAttrib(e,t.name,t.value);case"setstyle":return r.setStyle(e,t.name,t.value);case"removeformat":return r.setAttrib(e,"class","")}}i=o.settings.merge_styles_invalid_parents,tinymce.is(i,"string")&&(i=new RegExp(i,"i")),(n=this.getSelectedElement())&&!o.settings.force_span_wrappers?d(n):(s.execCommand("FontName",!1,"__"),f(u?r.select("span"):r.select("font"),function(e){var t;"__"!=r.getAttrib(e,"face")&&"__"!==e.style.fontFamily||(d(t=r.create(c,{mce_new:"1"})),f(e.childNodes,function(e){t.appendChild(e.cloneNode(!0))}),r.replace(t,e))})),f(r.select(c).reverse(),function(e){e.parentNode;r.getAttrib(e,"mce_new")||r.getParent(e,function(e){return 1==e.nodeType&&r.getAttrib(e,"mce_new")})&&r.remove(e,1)}),f(r.select(c).reverse(),function(e){var t=e.parentNode;if(t&&r.getAttrib(e,"mce_new")&&(!o.settings.force_span_wrappers||"SPAN"==t.nodeName))return t.nodeName==c.toUpperCase()&&1==t.childNodes.length?r.remove(t,1):void(1!=e.nodeType||i&&i.test(t.nodeName)||1!=t.childNodes.length||(d(t),r.setAttrib(e,"class","")))}),f(r.select(c).reverse(),function(e){if(r.getAttrib(e,"mce_new")||r.getAttribs(e).length<=1&&""===e.className){if(!r.getAttrib(e,"class")&&!r.getAttrib(e,"style"))return r.remove(e,1);r.setAttrib(e,"mce_new","")}}),a.moveToBookmark(l)},queryStateJustify:function(e,t){var n=this.editor,i=n.selection.getNode(),o=n.dom;return i&&"IMG"==i.nodeName?o.getStyle(i,"float")==t?1:i.parentNode.style.textAlign==t:(i=o.getParent(n.selection.getStart(),function(e){return 1==e.nodeType&&e.style.textAlign}),"full"==t&&(t="justify"),n.settings.inline_styles?i&&i.style.textAlign==t:this._queryState(e))},ForeColor:function(e,t){var n=this.editor;n.settings.convert_fonts_to_spans?this._applyInlineStyle("span",{style:{color:t}}):n.getDoc().execCommand("ForeColor",!1,t)},HiliteColor:function(e,t){var n=this.editor,i=n.getDoc();function o(t){if(s)try{i.execCommand("styleWithCSS",0,t)}catch(e){i.execCommand("useCSS",0,!t)}}n.settings.convert_fonts_to_spans?this._applyInlineStyle("span",{style:{backgroundColor:t}}):s||r?(o(!0),i.execCommand("hilitecolor",!1,t),o(!1)):i.execCommand("BackColor",!1,t)},Undo:function(){var e=this.editor;e.settings.custom_undo_redo?(e.undoManager.undo(),e.nodeChanged()):e.getDoc().execCommand("Undo",!1,null)},Redo:function(){var e=this.editor;e.settings.custom_undo_redo?(e.undoManager.redo(),e.nodeChanged()):e.getDoc().execCommand("Redo",!1,null)},FormatBlock:function(e,t){var n,i,o,s=this.editor,r=s.selection,a=s.dom;function c(e){return/^(P|DIV|H[1-6]|ADDRESS|BLOCKQUOTE|PRE)$/.test(e.nodeName)}if(n=a.getParent(r.getNode(),c),n&&(p&&c(n.parentNode)||"DIV"==n.nodeName))return i=s.dom.create(t),f(a.getAttribs(n),function(e){a.setAttrib(i,e.nodeName,a.getAttrib(n,e.nodeName))}),o=r.getBookmark(),a.replace(i,n,1),r.moveToBookmark(o),void s.nodeChanged();-1==(t=s.settings.forced_root_block?t||"<p>":t).indexOf("<")&&(t="<"+t+">"),tinymce.isGecko&&(t=t.replace(/<(div|blockquote|code|dt|dd|dl|samp)>/gi,"$1")),s.getDoc().execCommand("FormatBlock",!1,t)},mceCleanup:function(){var e=this.editor,t=e.selection,n=t.getBookmark();e.setContent(e.getContent()),t.moveToBookmark(n)},mceRemoveNode:function(e,t){var n=this.editor,i=n.selection,o=t||i.getNode();o!=n.getBody()&&(t=i.getBookmark(),n.dom.remove(o,1),i.moveToBookmark(t),n.nodeChanged())},mceSelectNodeDepth:function(e,t){var n=this.editor,i=n.selection,o=0;n.dom.getParent(i.getNode(),function(e){if(1==e.nodeType&&o++==t)return i.select(e),n.nodeChanged(),!1},n.getBody())},mceSelectNode:function(e,t){this.editor.selection.select(t)},mceInsertContent:function(e,t){this.editor.selection.setContent(t)},mceInsertRawHTML:function(e,t){var n=this.editor;n.selection.setContent("tiny_mce_marker"),n.setContent(n.getContent().replace(/tiny_mce_marker/g,t))},mceRepaint:function(){var e,t,n=this.editor;if(tinymce.isGecko)try{t=(e=n.selection).getBookmark(!0),e.getSel()&&e.getSel().selectAllChildren(n.getBody()),e.collapse(!0),e.moveToBookmark(t)}catch(e){}},queryStateUnderline:function(){var e=this.editor.selection.getNode();return(!e||"A"!=e.nodeName)&&this._queryState("Underline")},queryStateOutdent:function(){var e,t=this.editor;if(t.settings.inline_styles){if((e=t.dom.getParent(t.selection.getStart(),t.dom.isBlock))&&0<parseInt(e.style.paddingLeft))return!0;if((e=t.dom.getParent(t.selection.getEnd(),t.dom.isBlock))&&0<parseInt(e.style.paddingLeft))return!0}return this.queryStateInsertUnorderedList()||this.queryStateInsertOrderedList()||!t.settings.inline_styles&&!!t.dom.getParent(t.selection.getNode(),"BLOCKQUOTE")},queryStateInsertUnorderedList:function(){return this.editor.dom.getParent(this.editor.selection.getNode(),"UL")},queryStateInsertOrderedList:function(){return this.editor.dom.getParent(this.editor.selection.getNode(),"OL")},queryStatemceBlockQuote:function(){return!!this.editor.dom.getParent(this.editor.selection.getStart(),function(e){return"BLOCKQUOTE"===e.nodeName})},mceBlockQuote:function(){var e,t,n,i,o,s,r,a,c,l=this,d=l.editor,u=d.selection,m=d.dom;function h(e){return m.getParent(e,function(e){return"BLOCKQUOTE"===e.nodeName})}if(e=m.getParent(u.getStart(),g),t=m.getParent(u.getEnd(),g),o=h(e)){if((e!=t||1<e.childNodes.length||1==e.childNodes.length&&"BR"!=e.firstChild.nodeName)&&(i=u.getBookmark()),h(t))for(r=o.cloneNode(!1);n=t.nextSibling;)r.appendChild(n.parentNode.removeChild(n));for(r&&m.insertAfter(r,o),a=(c=l._getSelectedBlocks(e,t)).length-1;0<=a;a--)m.insertAfter(c[a],o);return/^\s*$/.test(o.innerHTML)&&m.remove(o,1),r&&/^\s*$/.test(r.innerHTML)&&m.remove(r,1),void(i?l.editor.selection.moveToBookmark(i):p?(u.select(e),u.collapse(0),m.getParent(u.getStart(),g)!=e&&((s=u.getRng()).move("character",-1),s.select())):((s=d.getDoc().createRange()).setStart(e,0),s.setEnd(e,0),u.setRng(s)))}if(p&&!e&&!t)return l.editor.getDoc().execCommand("Indent"),void((n=h(u.getNode())).style.margin=n.dir="");e&&t&&((e!=t||1<e.childNodes.length||1==e.childNodes.length&&"BR"!=e.firstChild.nodeName)&&(i=u.getBookmark()),f(l._getSelectedBlocks(h(u.getStart()),h(u.getEnd())),function(e){if("BLOCKQUOTE"!=e.nodeName||o)if(o||(o=m.create("blockquote"),e.parentNode.insertBefore(o,e)),"BLOCKQUOTE"==e.nodeName&&o){for(n=e.firstChild;n;)o.appendChild(n.cloneNode(!0)),n=n.nextSibling;m.remove(e)}else o.appendChild(m.remove(e));else o=e}),i?u.moveToBookmark(i):p?(u.select(e),u.collapse(1)):((s=d.getDoc().createRange()).setStart(e,0),s.setEnd(e,0),u.setRng(s)))},_applyInlineStyle:function(n,s,r){var e,t=this,i=t.editor,a=i.dom,c={};function o(){var t;return f(a.select(tinymce.isWebKit&&!tinymce.isAir?"span":"font"),function(e){"mceinline"!=e.style.fontFamily&&"mceinline"!=e.face||(t=t||i.selection.getBookmark(),s._mce_new="1",a.replace(a.create(n,s),e,1))}),f(a.select(n),function(o){function e(n){1==n.nodeType&&(f(s.style,function(e,t){a.setStyle(n,t,"")}),s.class&&n.className&&r&&f(r.check_classes,function(e){a.hasClass(n,e)&&a.removeClass(n,e)}))}o.getAttribute("_mce_new")&&(f(a.select(n,o),e),o.parentNode&&1==o.parentNode.nodeType&&1==o.parentNode.childNodes.length&&e(o.parentNode),a.getParent(o.parentNode,function(i){return 1==i.nodeType&&(s.style&&f(s.style,function(e,t){var n;!c[t]&&(n=a.getStyle(i,t))&&(n===e&&a.setStyle(o,t,""),c[t]=1)}),s.class&&i.className&&r&&f(r.check_classes,function(e){a.hasClass(i,e)&&a.removeClass(o,e)})),!1}),o.removeAttribute("_mce_new"))}),f(a.select(n).reverse(),function(t){var n=0;f(a.getAttribs(t),function(e){"_"!=e.nodeName.substring(0,1)&&""!=a.getAttrib(t,e.nodeName)&&n++}),0==n&&a.remove(t,1)}),i.selection.moveToBookmark(t),t}n=n.toUpperCase(),r&&r.check_classes&&s.class&&r.check_classes.push(s.class),i.focus(),i.getDoc().execCommand("FontName",!1,"mceinline"),o(),(e=t._applyInlineStyle.keyhandler)&&(i.onKeyUp.remove(e),i.onKeyPress.remove(e),i.onKeyDown.remove(e),i.onSetContent.remove(t._applyInlineStyle.chandler)),i.selection.isCollapsed()?(t._pendingStyles=tinymce.extend(t._pendingStyles||{},s.style),t._applyInlineStyle.chandler=i.onSetContent.add(function(){delete t._pendingStyles}),t._applyInlineStyle.keyhandler=e=function(e){t._pendingStyles&&(s.style=t._pendingStyles,delete t._pendingStyles),o()&&(i.onKeyDown.remove(t._applyInlineStyle.keyhandler),i.onKeyPress.remove(t._applyInlineStyle.keyhandler)),"keyup"==e.type&&i.onKeyUp.remove(t._applyInlineStyle.keyhandler)},i.onKeyDown.add(e),i.onKeyPress.add(e),i.onKeyUp.add(e)):t._pendingStyles=0},_getSelectedBlocks:function(e,t){var n,i=this.editor,o=i.dom,i=i.selection,s=[],e=o.getParent(e||i.getStart(),g),r=o.getParent(t||i.getEnd(),g);if(e&&s.push(e),e&&r&&e!=r)for(n=e;(n=n.nextSibling)&&n!=r;)g(n)&&s.push(n);return r&&e!=r&&s.push(r),s}})}(),tinymce.create("tinymce.UndoManager",{index:0,data:null,typing:0,UndoManager:function(e){var t=this,n=tinymce.util.Dispatcher;t.editor=e,t.data=[],t.onAdd=new n(this),t.onUndo=new n(this),t.onRedo=new n(this)},add:function(e){var t,n,i,o=this,s=o.editor,r=s.settings;if((e=e||{}).content=e.content||s.getContent({format:"raw",no_events:1}),e.content=e.content.replace(/^\s*|\s*$/g,""),i=o.data[0<o.index&&(0==o.index||o.index==o.data.length)?o.index-1:o.index],!e.initial&&i&&e.content==i.content)return null;if(r.custom_undo_redo_levels&&o.data.length>r.custom_undo_redo_levels){for(t=0;t<o.data.length-1;t++)o.data[t]=o.data[t+1];o.data.length--,o.index=o.data.length}return r.custom_undo_redo_restore_selection&&!e.initial&&(e.bookmark=n=e.bookmark||s.selection.getBookmark()),o.index<o.data.length&&o.index++,0!==o.data.length||e.initial?(o.data.length=o.index+1,(o.data[o.index++]=e).initial&&(o.index=0),2==o.data.length&&o.data[0].initial&&(o.data[0].bookmark=n),o.onAdd.dispatch(o,e),s.isNotDirty=0,e):null},undo:function(){var e,t=this,n=t.editor,i=i;return t.typing&&(t.add(),t.typing=0),0<t.index&&(t.index==t.data.length&&1<t.index&&(e=t.index,t.typing=0,t.add()||(t.index=e),--t.index),i=t.data[--t.index],n.setContent(i.content,{format:"raw"}),n.selection.moveToBookmark(i.bookmark),t.onUndo.dispatch(t,i)),i},redo:function(){var e=this,t=e.editor,n=null;return e.index<e.data.length-1&&(n=e.data[++e.index],t.setContent(n.content,{format:"raw"}),t.selection.moveToBookmark(n.bookmark),e.onRedo.dispatch(e,n)),n},clear:function(){this.data=[],this.index=0,this.typing=0,this.add({initial:!0})},hasUndo:function(){return 0!=this.index||this.typing},hasRedo:function(){return this.index<this.data.length-1}}),function(){var m=tinymce.dom.Event,x=tinymce.isIE,E=tinymce.isGecko,M=tinymce.isOpera,a=tinymce.each;tinymce.extend;tinymce.create("tinymce.ForceBlocks",{ForceBlocks:function(e){var n,i=this,t=e.settings;function o(e,t){M&&(t.content=t.content.replace(i.reOpera,"</"+n+">")),t.content=t.content.replace(i.rePadd,"<"+n+"$1$2$3$4$5$6></"+n+">"),x||M||!t.set?(t.content=t.content.replace(i.reBR2Nbsp,"<"+n+"$1$2></"+n+">"),t.content=t.content.replace(i.reTrailBr,"</"+n+">")):(t.content=t.content.replace(i.reNbsp2BR1,"<"+n+"$1$2><br /></"+n+">"),t.content=t.content.replace(i.reNbsp2BR2,"<"+n+"$1$2><br /></"+n+">"))}i.editor=e,i.dom=e.dom,n=(t.forced_root_block||"p").toLowerCase(),t.element=n.toUpperCase(),e.onPreInit.add(i.setup,i),i.reOpera=new RegExp("(\\u00a0|&#160;|&nbsp;)</"+n+">","gi"),i.rePadd=new RegExp("<p( )([^>]+)><\\/p>|<p( )([^>]+)\\/>|<p( )([^>]+)>\\s+<\\/p>|<p><\\/p>|<p\\/>|<p>\\s+<\\/p>".replace(/p/g,n),"gi"),i.reNbsp2BR1=new RegExp("<p( )([^>]+)>[\\s\\u00a0]+<\\/p>|<p>[\\s\\u00a0]+<\\/p>".replace(/p/g,n),"gi"),i.reNbsp2BR2=new RegExp("<p( )([^>]+)>(&nbsp;|&#160;)<\\/p>|<p>(&nbsp;|&#160;)<\\/p>".replace(/p/g,n),"gi"),i.reBR2Nbsp=new RegExp("<p( )([^>]+)>\\s*<br \\/>\\s*<\\/p>|<p>\\s*<br \\/>\\s*<\\/p>".replace(/p/g,n),"gi"),i.reTrailBr=new RegExp("\\s*<br \\/>\\s*<\\/p>".replace(/p/g,n),"gi"),e.onBeforeSetContent.add(o),e.onPostProcess.add(o),t.forced_root_block&&(e.onInit.add(i.forceRoots,i),e.onSetContent.add(i.forceRoots,i),e.onBeforeGetContent.add(i.forceRoots,i))},setup:function(){var o=this,i=o.editor,s=i.settings;function r(e,t){var n=i.dom.create(t);return a(e.attributes,function(e){e.specified&&e.nodeValue&&n.setAttribute(e.nodeName.toLowerCase(),e.nodeValue)}),a(e.childNodes,function(e){n.appendChild(e.cloneNode(!0))}),e.parentNode.replaceChild(n,e),n}s.forced_root_block&&(i.onKeyUp.add(o.forceRoots,o),i.onPreProcess.add(o.forceRoots,o)),s.force_br_newlines?x&&i.onKeyPress.add(function(e,t){var n=e.selection;if(13==t.keyCode&&"LI"!=n.getNode().nodeName)return n.setContent('<br id="__" /> ',{format:"raw"}),(e=e.dom.get("__")).removeAttribute("id"),n.select(e),n.collapse(),m.cancel(t)}):(!x&&s.force_p_newlines&&(i.onKeyPress.add(function(e,t){13!=t.keyCode||t.shiftKey||o.insertPara(t)||m.cancel(t)}),E&&i.onKeyDown.add(function(e,t){8!=t.keyCode&&46!=t.keyCode||t.shiftKey||o.backspaceDelete(t,8==t.keyCode)})),x&&"P"!=s.element&&(i.onKeyPress.add(function(e,t){o.lastElm=e.selection.getNode().nodeName}),i.onKeyUp.add(function(e,t){var n=e.selection,i=n.getNode();1===e.getBody().childNodes.length&&"P"==i.nodeName?(i=r(i,s.element),n.select(i),n.collapse(),e.nodeChanged()):13!=t.keyCode||t.shiftKey||"P"==o.lastElm||(i=e.dom.getParent(i,"P"))&&(r(i,s.element),e.nodeChanged())})))},find:function(e,t,n){for(var i=this.editor.getDoc().createTreeWalker(e,4,null,!1),o=-1;e=i.nextNode();){if(o++,0==t&&e==n)return o;if(1==t&&o==n)return e}return-1},forceRoots:function(e,t){for(var n,i,o,s,r,a,c,l,d,u,m=this,h=(e=m.editor).getBody(),f=e.getDoc(),p=e.selection,g=p.getSel(),y=p.getRng(),v=-2,_=-16777215,b=h.childNodes,C=b.length-1;0<=C;C--)3==(r=b[C]).nodeType||!m.dom.isBlock(r)&&8!=r.nodeType?a?a.hasChildNodes()?a.insertBefore(r,a.firstChild):a.appendChild(r):3==r.nodeType&&!/[^\s]/g.test(r.nodeValue)||(-2==v&&y&&(x?((s=f.body.createTextRange()).moveToElementText(h),s.collapse(1),c=-1*s.move("character",_),(s=y.duplicate()).collapse(1),l=-1*s.move("character",_),(s=y.duplicate()).collapse(0),v=l-c,n=-1*s.move("character",_)-l):1==y.startContainer.nodeType&&(d=y.startContainer.childNodes[y.startOffset])&&1==d.nodeType?(u=d.getAttribute("id"),d.setAttribute("id","__mce")):e.dom.getParent(y.startContainer,function(e){return e===h})&&(i=y.startOffset,o=y.endOffset,v=m.find(h,0,y.startContainer),n=m.find(h,0,y.endContainer))),(a=e.dom.create(e.settings.forced_root_block)).appendChild(r.cloneNode(1)),r.parentNode.replaceChild(a,r)):a=null;if(-2!=v)if(x)try{(y=g.createRange()).moveToElementText(h),y.collapse(1),y.moveStart("character",v),y.moveEnd("character",n),y.select()}catch(e){}else a=h.getElementsByTagName(e.settings.element)[0],y=f.createRange(),-1!=v?y.setStart(m.find(h,1,v),i):y.setStart(a,0),-1!=n?y.setEnd(m.find(h,1,n),o):y.setEnd(a,0),g&&(g.removeAllRanges(),g.addRange(y));else!x&&(d=e.dom.get("__mce"))&&(u?d.setAttribute("id",u):d.removeAttribute("id"),(y=f.createRange()).setStartBefore(d),y.setEndBefore(d),p.setRng(y))},getParentBlock:function(e){var t=this.dom;return t.getParent(e,t.isBlock)},insertPara:function(e){var t,n,i,o,s,r,a,c,l,d,u,m,h,f,p,g=this,y=g.editor,v=y.dom,_=y.getDoc(),b=y.settings,C=y.selection.getSel(),x=C.getRangeAt(0),w=_.body,S=v.getViewPort(y.getWin());function k(e){return""==(e=(e=(e=e.innerHTML).replace(/<(img|hr|table)/gi,"-")).replace(/<[^>]+>/g,"")).replace(/[ \t\r\n]+/g,"")}if((t=_.createRange()).setStart(C.anchorNode,C.anchorOffset),t.collapse(!0),(n=_.createRange()).setStart(C.focusNode,C.focusOffset),n.collapse(!0),i=(c=t.compareBoundaryPoints(t.START_TO_END,n)<0)?C.anchorNode:C.focusNode,o=c?C.anchorOffset:C.focusOffset,s=c?C.focusNode:C.anchorNode,r=c?C.focusOffset:C.anchorOffset,i===s&&/^(TD|TH)$/.test(i.nodeName))return v.remove(i.firstChild),y.dom.add(i,b.element,null,"<br />"),h=y.dom.add(i,b.element,null,"<br />"),(x=_.createRange()).selectNodeContents(h),x.collapse(1),y.selection.setRng(x),!1;if(i==w&&s==w&&w.firstChild&&y.dom.isBlock(w.firstChild)&&(i=s=i.firstChild,o=r=0,(t=_.createRange()).setStart(i,0),(n=_.createRange()).setStart(s,0)),i="BODY"==(i="HTML"==i.nodeName?_.body:i).nodeName?i.firstChild:i,s="BODY"==(s="HTML"==s.nodeName?_.body:s).nodeName?s.firstChild:s,l=g.getParentBlock(i),a=g.getParentBlock(s),c=l?l.nodeName:b.element,g.dom.getParent(l,function(e){return/OL|UL|PRE/.test(e.nodeName)}))return!0;for(l&&("CAPTION"==l.nodeName||/absolute|relative|static/gi.test(l.style.position))&&(c=b.element,l=null),a&&("CAPTION"==a.nodeName||/absolute|relative|static/gi.test(a.style.position))&&(c=b.element,a=null),(/(TD|TABLE|TH|CAPTION)/.test(c)||l&&"DIV"==c&&/left|right/gi.test(l.style.cssFloat))&&(c=b.element,l=a=null),l=l&&l.nodeName==c?l.cloneNode(0):y.dom.create(c),(h=a&&a.nodeName==c?a.cloneNode(0):y.dom.create(c)).removeAttribute("id"),/^(H[1-6])$/.test(c)&&i.nodeValue&&o==i.nodeValue.length&&(h=y.dom.create(b.element)),m=d=i;m!=w&&9!=m.nodeType&&!g.dom.isBlock(m)&&!/(TD|TABLE|TH|CAPTION)/.test(m.nodeName)&&(m=(d=m).previousSibling||m.parentNode););for(m=u=s;m!=w&&9!=m.nodeType&&!g.dom.isBlock(m)&&!/(TD|TABLE|TH|CAPTION)/.test(m.nodeName)&&(m=(u=m).nextSibling||m.parentNode););d.nodeName==c?t.setStart(d,0):t.setStartBefore(d),t.setEnd(i,o),l.appendChild(t.cloneContents()||_.createTextNode(""));try{n.setEndAfter(u)}catch(e){}return n.setStart(s,r),h.appendChild(n.cloneContents()||_.createTextNode("")),x=_.createRange(),d.previousSibling||d.parentNode.nodeName!=c?t.startContainer.nodeName==c&&0==t.startOffset?x.setStartBefore(t.startContainer):x.setStart(t.startContainer,t.startOffset):x.setStartBefore(d.parentNode),u.nextSibling||u.parentNode.nodeName!=c?x.setEnd(n.endContainer,n.endOffset):x.setEndAfter(u.parentNode),x.deleteContents(),M&&y.getWin().scrollTo(0,S.y),l.firstChild&&l.firstChild.nodeName==c&&(l.innerHTML=l.firstChild.innerHTML),h.firstChild&&h.firstChild.nodeName==c&&(h.innerHTML=h.firstChild.innerHTML),k(l)&&(l.innerHTML="<br />"),k(h)&&(f=function(e,t){var n,i,o,s=[];if(e.innerHTML="",b.keep_styles)for(i=t;/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(i.nodeName)&&(n=i.cloneNode(!1),v.setAttrib(n,"id",""),s.push(n)),i=i.parentNode;);if(0<s.length){for(o=s.length-1,n=e;0<=o;o--)n=n.appendChild(s[o]);return s[0].innerHTML=M?"&nbsp;":"<br />",s[0]}e.innerHTML=M?"&nbsp;":"<br />"}(h,s)),M&&parseFloat(opera.version())<9.5?(x.insertNode(l),x.insertNode(h)):(x.insertNode(h),x.insertNode(l)),h.normalize(),l.normalize(),(x=_.createRange()).selectNodeContents(E?(p=f||h,_.createTreeWalker(p,NodeFilter.SHOW_TEXT,null,!1).nextNode()||p):f||h),x.collapse(1),C.removeAllRanges(),C.addRange(x),x=y.dom.getPos(h).y,h=h.clientHeight,(x<S.y||x+h>S.y+S.h)&&y.getWin().scrollTo(0,x<S.y?x:x-S.h+25),!1},backspaceDelete:function(e,t){var n,i,o,s=this,r=s.editor,a=r.getBody(),c=r.selection,l=c.getRng(),d=l.startContainer;if(d&&r.dom.isBlock(d)&&!/^(TD|TH)$/.test(d.nodeName)&&t&&(0==d.childNodes.length||1==d.childNodes.length&&"BR"==d.firstChild.nodeName)){for(n=d;(n=n.previousSibling)&&!r.dom.isBlock(n););if(n){if(d!=a.firstChild){for(i=r.dom.doc.createTreeWalker(n,NodeFilter.SHOW_TEXT,null,!1);o=i.nextNode();)n=o;(l=r.getDoc().createRange()).setStart(n,n.nodeValue?n.nodeValue.length:0),l.setEnd(n,n.nodeValue?n.nodeValue.length:0),c.setRng(l),r.dom.remove(d)}return m.cancel(e)}}function u(e){var t;(e=e.target)&&e.parentNode&&"BR"==e.nodeName&&(n=s.getParentBlock(e))&&(t=e.previousSibling,m.remove(a,"DOMNodeInserted",u),t&&3==t.nodeType&&/\s+$/.test(t.nodeValue)||(e.previousSibling||e.nextSibling)&&r.dom.remove(e))}m._add(a,"DOMNodeInserted",u),window.setTimeout(function(){m._remove(a,"DOMNodeInserted",u)},1)}})}(),function(){tinymce.DOM;var s=tinymce.dom.Event,o=tinymce.each,c=tinymce.extend;tinymce.create("tinymce.ControlManager",{ControlManager:function(e,t){var n=this;t=t||{},n.editor=e,n.controls={},n.onAdd=new tinymce.util.Dispatcher(n),n.onPostRender=new tinymce.util.Dispatcher(n),n.prefix=t.prefix||e.id+"_",n._cls={},n.onPostRender.add(function(){o(n.controls,function(e){e.postRender()})})},get:function(e){return this.controls[this.prefix+e]||this.controls[e]},setActive:function(e,t){var n=null;return(n=this.get(e))&&n.setActive(t),n},setDisabled:function(e,t){var n=null;return(n=this.get(e))&&n.setDisabled(t),n},add:function(e){return e&&(this.controls[e.id]=e,this.onAdd.dispatch(e,this)),e},createControl:function(t){var n,i=this,e=i.editor;switch(o(e.plugins,function(e){if(e.createControl&&(n=e.createControl(t,i)))return!1}),t){case"|":case"separator":return i.createSeparator()}return!n&&e.buttons&&(n=e.buttons[t])?i.createButton(t,n):i.add(n)},createDropMenu:function(e,t,n){var i,o,s,r=this,a=r.editor;return(t=c({class:"mceDropDown",constrain:a.settings.constrain_menus},t)).class=t.class+" "+a.getParam("skin")+"Skin",(s=a.getParam("skin_variant"))&&(t.class+=" "+a.getParam("skin")+"Skin"+s.substring(0,1).toUpperCase()+s.substring(1)),e=r.prefix+e,n=n||r._cls.dropmenu||tinymce.ui.DropMenu,(i=r.controls[e]=new n(e,t)).onAddItem.add(function(e,t){var n=t.settings;n.title=a.getLang(n.title,n.title),n.onclick||(n.onclick=function(e){a.execCommand(n.cmd,n.ui||!1,n.value)})}),a.onRemove.add(function(){i.destroy()}),tinymce.isIE&&(i.onShowMenu.add(function(){o=a.selection.getBookmark(1)}),i.onHideMenu.add(function(){o&&a.selection.moveToBookmark(o)})),r.add(i)},createListBox:function(e,t,n){var i=this,o=i.editor;return i.get(e)?null:(t.title=o.translate(t.title),t.scope=t.scope||o,t.onselect||(t.onselect=function(e){o.execCommand(t.cmd,t.ui||!1,e||t.value)}),t=c({title:t.title,class:"mce_"+e,scope:t.scope,control_manager:i},t),e=i.prefix+e,n=new(o.settings.use_native_selects?tinymce.ui.NativeListBox:n||i._cls.listbox||tinymce.ui.ListBox)(e,t),i.controls[e]=n,tinymce.isWebKit&&n.onPostRender.add(function(e,t){s.add(t,"mousedown",function(){o.bookmark=o.selection.getBookmark("simple")}),s.add(t,"focus",function(){o.selection.moveToBookmark(o.bookmark),o.bookmark=null})}),n.hideMenu&&o.onMouseDown.add(n.hideMenu,n),i.add(n))},createButton:function(e,t,n){var i,o=this,s=o.editor;return o.get(e)?null:(t.title=s.translate(t.title),t.label=s.translate(t.label),t.scope=t.scope||s,t.onclick||t.menu_button||(t.onclick=function(){s.execCommand(t.cmd,t.ui||!1,t.value)}),t=c({title:t.title,class:"mce_"+e,unavailable_prefix:s.getLang("unavailable",""),scope:t.scope,control_manager:o},t),e=o.prefix+e,t.menu_button?(i=new(n||o._cls.menubutton||tinymce.ui.MenuButton)(e,t),s.onMouseDown.add(i.hideMenu,i)):i=new(o._cls.button||tinymce.ui.Button)(e,t),o.add(i))},createMenuButton:function(e,t,n){return(t=t||{}).menu_button=1,this.createButton(e,t,n)},createSplitButton:function(e,t,n){var i=this,o=i.editor;return i.get(e)?null:(t.title=o.translate(t.title),t.scope=t.scope||o,t.onclick||(t.onclick=function(e){o.execCommand(t.cmd,t.ui||!1,e||t.value)}),t.onselect||(t.onselect=function(e){o.execCommand(t.cmd,t.ui||!1,e||t.value)}),t=c({title:t.title,class:"mce_"+e,scope:t.scope,control_manager:i},t),e=i.prefix+e,n=n||i._cls.splitbutton||tinymce.ui.SplitButton,e=i.add(new n(e,t)),o.onMouseDown.add(e.hideMenu,e),e)},createColorSplitButton:function(e,t,n){var i,o,s=this,r=s.editor;return s.get(e)?null:(t.title=r.translate(t.title),t.scope=t.scope||r,t.onclick||(t.onclick=function(e){r.execCommand(t.cmd,t.ui||!1,e||t.value)}),t.onselect||(t.onselect=function(e){r.execCommand(t.cmd,t.ui||!1,e||t.value)}),t=c({title:t.title,class:"mce_"+e,menu_class:r.getParam("skin")+"Skin",scope:t.scope,more_colors_title:r.getLang("more_colors")},t),e=s.prefix+e,n=n||s._cls.colorsplitbutton||tinymce.ui.ColorSplitButton,i=new n(e,t),r.onMouseDown.add(i.hideMenu,i),r.onRemove.add(function(){i.destroy()}),tinymce.isIE&&(i.onShowMenu.add(function(){o=r.selection.getBookmark(1)}),i.onHideMenu.add(function(){o&&(r.selection.moveToBookmark(o),o=0)})),s.add(i))},createToolbar:function(e,t,n){return e=this.prefix+e,t=new(n||this._cls.toolbar||tinymce.ui.Toolbar)(e,t),this.get(e)?null:this.add(t)},createSeparator:function(e){return new(e||this._cls.separator||tinymce.ui.Separator)},setControlType:function(e,t){return this._cls[e.toLowerCase()]=t},destroy:function(){o(this.controls,function(e){e.destroy()}),this.controls=null}})}(),function(){var n=tinymce.util.Dispatcher,l=tinymce.each,d=tinymce.isIE,u=tinymce.isOpera;tinymce.create("tinymce.WindowManager",{WindowManager:function(e){var t=this;t.editor=e,t.onOpen=new n(t),t.onClose=new n(t),t.params={},t.features={}},open:function(e,t){var n,i,o,s=this,r="",a="modal"==s.editor.settings.dialog_type,c=tinymce.DOM.getViewPort();e=e||{},t=t||{},i=u?c.w:screen.width,c=u?c.h:screen.height,e.name=e.name||"mc_"+(new Date).getTime(),e.width=parseInt(e.width||320),e.height=parseInt(e.height||240),e.resizable=!0,e.left=e.left||parseInt(i/2)-e.width/2,e.top=e.top||parseInt(c/2)-e.height/2,t.inline=!1,t.mce_width=e.width,t.mce_height=e.height,t.mce_auto_focus=e.auto_focus,a&&d&&(e.center=!0,e.help=!1,e.dialogWidth=e.width+"px",e.dialogHeight=e.height+"px",e.scroll=e.scrollbars||!1),l(e,function(e,t){tinymce.is(e,"boolean")&&(e=e?"yes":"no"),/^(name|url)$/.test(t)||(r+=d&&a?(r?";":"")+t+":"+e:(r?",":"")+t+"="+e)}),s.features=e,s.params=t,s.onOpen.dispatch(s,e,t),o=e.url||e.file,tinymce.relaxedDomain&&(o+=(-1==o.indexOf("?")?"?":"&")+"mce_rdomain="+tinymce.relaxedDomain),o=tinymce._addVer(o);try{d&&a?(n=1,window.showModalDialog(o,window,r)):n=window.open(o,e.name,r)}catch(e){}n||alert(s.editor.getLang("popup_blocked"))},close:function(e){e.close(),this.onClose.dispatch(this)},createInstance:function(e,t,n,i,o,s){return new(tinymce.resolve(e))(t,n,i,o,s)},confirm:function(e,t,n,i){i=i||window,t.call(n||this,i.confirm(this._decode(this.editor.getLang(e,e))))},alert:function(e,t,n,i){(i=i||window).alert(this._decode(this.editor.getLang(e,e))),t&&t.call(n||this)},_decode:function(e){return tinymce.DOM.decode(e).replace(/\\n/g,"\n")}})}();