window.addEventListener("load",function(){!async function(){try{var e=await fetch("https://t-pay.iqfit.app/subscribe/list-test",{method:"GET"});if(e.ok)return await e.json();throw new Error("Error! status: "+e.status)}catch(e){console.log(e)}}().then(e=>{let t=[],r=[],o=[],a=(e.forEach(e=>{(!0===e.isDiscount?t:!0===e.isPopular?r:o).push(e)}),[]),n=[];r.forEach(r=>{o.forEach(e=>{if(r.name==e.name){var t={};switch(t.name=r.name,t.price=r.price,t.oldPrice=e.price,r.name){case"1 неделя":t.rate="-30%",t.tagline="super",t.id="1-week";break;case"1 месяц":t.rate="-40%",t.tagline="power",t.id="1-month";break;case"3 месяца":t.rate="-50%",t.tagline="fire",t.id="3-month";break;case"навсегда":t.rate="-70%",t.tagline="star",t.id="forever"}a.push(t)}})}),t.forEach(r=>{o.forEach(e=>{if(r.name==e.name){var t={};switch(t.name=r.name,t.price=r.price,t.oldPrice=e.price,r.name){case"1 неделя":t.rate="-40%",t.id="1-week";break;case"1 месяц":t.rate="-50%",t.id="1-month";break;case"3 месяца":t.rate="-60%",t.id="3-month"}n.push(t)}})}),c(a),i(n)});const e=document.querySelector(".rates__list"),m=document.querySelector("#rates-item").content;let _=[];const t=document.querySelector(".modal-offer__list"),d=document.querySelector("#modal-offer__item").content;let u=[];const c=d=>{const u=document.createDocumentFragment();d.forEach(e=>{var{name:t,price:r,oldPrice:o,rate:a,tagline:n,id:c}=e,i=m.cloneNode(!0),s=i.querySelector(".rates__item-period").parentNode,l=(_.push(s),0==d.indexOf(e)&&(s.classList.add("radio--checked"),s.querySelector(".rates__input").checked=!0),i.querySelector(".rates__item-period").textContent=t,i.querySelector(".rates__item-price .new > span").textContent=r,i.querySelector(".rates__item-price .old > span").textContent=o,i.querySelector(".rates__item-discount > span").textContent=a,i.querySelector(".rates__item-tagline"));switch(l.classList.add("rates__item-tagline--"+n),n){case"super":l.querySelector(".text").textContent="Чтобы просто начать";break;case"power":l.querySelector(".text").textContent="Привести тело в порядок";break;case"fire":l.querySelector(".text").textContent="Изменить образ жизни";break;case"star":l.querySelector(".text").textContent="Всегда быть в форме",l.querySelector(".hide").textContent=" и поддерживать своё здоровье"}i.querySelector(".rates__input").value=c,i.querySelector(".rates__input").id="rates-"+c,i.querySelector(".rates__input").ariaLabel=t,i.querySelector(".rates__item-label").setAttribute("for","rates-"+c),u.appendChild(i)}),e.appendChild(u)},i=s=>{const l=document.createDocumentFragment();s.forEach(e=>{var{name:t,price:r,oldPrice:o,rate:a,id:n}=e,c=d.cloneNode(!0),i=c.querySelector(".modal-offer__item-period").parentNode;u.push(i),1==s.indexOf(e)&&(i.classList.add("radio--checked"),i.querySelector(".modal-offer__input").checked=!0),c.querySelector(".modal-offer__item-period").textContent=t,c.querySelector(".modal-offer__item-price-new > span").textContent=r,c.querySelector(".modal-offer__item-price-old > span").textContent=o,c.querySelector(".modal-offer__item-discount > span").textContent=a,c.querySelector(".modal-offer__input").value=n,c.querySelector(".modal-offer__input").id="modal-offer-"+n,c.querySelector(".modal-offer__input").ariaLabel=t,c.querySelector(".modal-offer__item-label").setAttribute("for","modal-offer-"+n),l.appendChild(c)}),t.appendChild(l)};function r(e,t){e.addEventListener("change",function(e){e=e.target.parentNode;t.forEach(function(e){e.classList.remove("radio--checked")}),e.classList.add("radio--checked")})}r(e,_),r(t,u);const o=document.querySelector(".timer__minutes .timer__number"),a=document.querySelector(".timer__minutes .text"),n=document.querySelector(".timer__seconds .timer__number"),s=document.querySelector(".timer__seconds .text"),l=document.querySelector(".timer__hm"),f=l.querySelector(".timer__del");document.querySelectorAll(".rates__item");let p=null;function h(e,t){return t[4<e%100&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]}let y=120;function q(){30==y?(l.classList.add("timer__red"),l.classList.add("timer__animate"),f.classList.add("timer__pulsate")):0==y&&(f.classList.remove("timer__pulsate"),l.classList.remove("timer__animate"),_.forEach(e=>{e.classList.add("no-sales")}),workModal(modalOffer,closeOffer,overlay)),(diff=1e3*y)<=0&&clearInterval(p);var e=0<diff?Math.floor(diff/1e3/60)%60:0,t=0<diff?Math.floor(diff/1e3)%60:0;o.textContent=e<10?"0"+e:e,n.textContent=t<10?"0"+t:t,a.textContent=h(e,["минуту","минуты","минут"]),s.textContent=h(t,["секунду","секунды","секунд"]),y--}q(),p=setInterval(q,1e3)});